(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{1002:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=a(4),l=R(i),r=R(a(27)),u=a(393);a(1003);var s=R(a(6)),d=R(a(23)),c=R(a(20)),f=R(a(82)),E=R(a(18)),g=R(a(175)),p=R(a(11)),A=R(a(852)),_=R(a(403)),m=R(a(173)),h=R(a(1004)),I=a(10),S=R(a(409)),C=R(a(84)),L=R(a(170)),N=R(a(408)),y=R(a(907)),v=R(a(401));function R(e){return e&&e.__esModule?e:{default:e}}var O=(0,i.lazy)((function(){return a.e(70).then(a.t.bind(null,876,7))})),T=(0,i.lazy)((function(){return Promise.resolve().then(a.t.bind(null,399,7))})),D=(0,i.lazy)((function(){return Promise.all([a.e(24),a.e(32)]).then(a.t.bind(null,964,7))})),G="selectHeadEnd",U="activationRequired",F="showLandingPage",P="startServiceLayer",b="loadChannelData",w="bootSequenceCompleted",B=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleBootFail=a.handleBootFail.bind(a),a.doNextBootStage=a.doNextBootStage.bind(a),a.startServiceLayer=a.startServiceLayer.bind(a),a.selectHeadEnd=a.selectHeadEnd.bind(a),a.drmTokenFromURLparam=a.drmTokenFromURLparam.bind(a),a.getSetErrorURLparam=a.getSetErrorURLparam.bind(a),a.getCSDS=a.getCSDS.bind(a),a.initDRM=a.initDRM.bind(a),a.startBootSequence_internal=a.startBootSequence_internal.bind(a),a.fireWaitingRoomAPIAtAppLaunch=a.fireWaitingRoomAPIAtAppLaunch.bind(a),a.dispatchLanguageUpdateNotificationToRoot=a.dispatchLanguageUpdateNotificationToRoot.bind(a),a.onGetHouseholdSuccess=a.onGetHouseholdSuccess.bind(a),a.responseFromServer=a.responseFromServer.bind(a),a.responseFromAuth=a.responseFromAuth.bind(a),a.addAppWebTitle=a.addAppWebTitle.bind(a),a.loadSplash=a.loadSplash.bind(a),a.stopCasting=a.stopCasting.bind(a),a.showWaitingRoom=a.showWaitingRoom.bind(a),a.exitWaitingRoom=a.exitWaitingRoom.bind(a),a.bootSequence=[G,F,U,P],a.bootSequence.push(b),a.bootSequence.push(w),a.state={currentStateString:p.default.getLabelByDictionaryId("DIC_LOADING"),showIDPLoginPage:!1,currentBootStage:0,zoomSplashBegan:!1,zoomSplashCompleted:!1,launchPaymentPage:!1,shouldShowWaitingRoom:!1},a.sessionGuardString=void 0,a.drmDeviceId=void 0,a.drmDeviceName=void 0,a.cloudConfig=void 0,a.waitingRoomObj=null,a.isExitWaitingRoom=!1,a.waitingRoomAPI="",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"addAppWebTitle",value:function(){return d.default.APP_GENERAL_CONFIG&&d.default.APP_GENERAL_CONFIG.documentInformation?d.default.APP_GENERAL_CONFIG.documentInformation.pageTitle:"IVP"}},{key:"componentDidMount",value:function(){v.default.setDelegate(this),L.default.init(),p.default.setPageTitle("Home"),p.default.addSEOMetaTags(),p.default.createOGFacebook(),document.addEventListener(c.default.EVENT_RESPONSE_FROM_SERVER,this.responseFromServer),document.addEventListener(c.default.EVENT_OAUTH_TOKEN_NOTICATION,this.responseFromAuth,!1),document.addEventListener(c.default.EVENT_SET_PAYMENT_FLAG,this.updateAdvancePaymentFlag),S.default.registerServiceWorker(),window.sessionStorage.setItem("loggedIn",!1)}},{key:"updateAdvancePaymentFlag",value:function(){var e=I.AppConstants.EVERGENT_TOKEN_COOKIE;p.default.getCookie(e);d.default&&d.default.FEATURE_CONFIG&&d.default.FEATURE_CONFIG.ADVANCE_PURCHASE}},{key:"componentWillUnmount",value:function(){v.default.setDelegate(null),this.waitingRoomObj=null,this.isExitWaitingRoom=!1,document.removeEventListener(c.default.EVENT_RESPONSE_FROM_SERVER,this.responseFromServer)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,A.default)(this.props,e)||!(0,A.default)(this.state,t)}},{key:"drmTokenFromURLparam",value:function(){var e=new URLSearchParams(window.location.search),t=void 0;return e&&(t=e.get("tkn")),t}},{key:"getSetErrorURLparam",value:function(){return new URLSearchParams(window.location.search).get("idpLoginFailure")}},{key:"showWaitingRoom",value:function(e){this.waitingRoomObj=e,this.setState({shouldShowWaitingRoom:!0})}},{key:"exitWaitingRoom",value:function(){this.setState({currentBootStage:0}),this.startBootSequence_internal(),this.isExitWaitingRoom=!0,this.setState({shouldShowWaitingRoom:!1})}},{key:"activateDeviceWithToken",value:function(e){var t=this,a={authenticationType:4,userName:"",deviceName:"",securityParams:e||null,reason:VgePlayback.ActivationReasons.NEW,activationType:VgePlayback.ActivationTypes.STANDARD};VgePlayback.activateDevice(a,(function(e){e.vgStatus.statusType==VGDRM.StatusTypes.SUCCESS?window.location.replace(window.location.origin):t.props.onLoginFail&&t.props.onLoginFail("drmActivationError")}))}},{key:"handleBootFail",value:function(){this.setState({currentStateString:p.default.getLabelByDictionaryId("DIC_ERROR_SIGN_IN_FAILED_NETWORK_REQUIRED")})}},{key:"doNextBootStage",value:function(){this.performBootStep(this.bootSequence[this.state.currentBootStage]),this.setState({currentBootStage:this.state.currentBootStage+1})}},{key:"getCSDS",value:function(){var e=this;f.default.ajax({dataType:"json",url:"./staticFiles/config/cloudws/cloudconfig_deployment.json?v=1622724841011",cache:!0,async:!1,success:function(t,a,n){if(t&&200===n.status){if(e.cloudConfig=t,p.default.getFeatureValue(I.featureConfigFlags.enableWaitingRoom)&&t&&""===t.CSDS_URL)return void console.error("FATAL ERROR! CSDS URL is empty. App launch aborted");if(t&&t.CSDS_URL&&""!==t.CSDS_URL){var i=t,l=-1!==t.CSDS_URL.indexOf("http")?t.CSDS_URL:"https://"+t.CSDS_URL;f.default.ajax({dataType:"json",url:l,async:!1,success:function(t,a,n){if(t&&200===n.status){if(p.default.getFeatureValue(I.featureConfigFlags.enableCdnCaching)&&t&&t.services&&t.services.ApiCache){var l={endPoint:t.services.ApiCache.endpoints&&t.services.ApiCache.endpoints[5]&&t.services.ApiCache.endpoints[5][0]?t.services.ApiCache.endpoints[5][0]:"",authType:t.services.ApiCache.authorizationType?t.services.ApiCache.authorizationType:void 0};s.default.setCDNCachingData(l)}if(t&&t.services&&t.services.LBSecureGW&&t.services.LBSecureGW.endpoints[5][0]&&i.DRM_SERVER_CONFIG&&(i.DRM_SERVER_CONFIG.config["sa.vgdrm.host"]=t.services.LBSecureGW.endpoints[5][0].split(":")[0],i.DRM_SERVER_CONFIG.config["sa.vgdrm.port"]=t.services.LBSecureGW.endpoints[5][0].split(":")[1]),t&&t.services&&t.services.SessionGuard&&t.services.SessionGuard.endpoints&&t.services.SessionGuard.endpoints[5]&&t.services.SessionGuard.endpoints[5][0]){var r=t.services.SessionGuard.endpoints[5][0];e.sessionGuardString=r.split("https://")[1]}0,p.default.getFeatureValue(I.featureConfigFlags.enableWaitingRoom)&&t&&t.services&&t.services.WaitingRoom&&t.services.WaitingRoom.endpoints&&t.services.WaitingRoom.endpoints[5]&&t.services.WaitingRoom.endpoints[5][0]&&(e.waitingRoomAPI=t.services.WaitingRoom.endpoints[5][0],v.default.setWaitingRoomAPI(e.waitingRoomAPI));var u="object"!==o(window.sessionStorage)||!window.sessionStorage.getItem("waiting_room_on_app_launch")||window.sessionStorage.getItem("waiting_room_on_app_launch");!p.default.getFeatureValue(I.featureConfigFlags.enableWaitingRoom)||""===this.waitingRoomAPI||!0!==u&&"true"!==u?e.doNextBootStage():e.fireWaitingRoomAPIAtAppLaunch((function(t){!0!==t&&e.doNextBootStage()}),(function(){e.doNextBootStage()}))}else console.error("FATAL error loading csds-server data!!!")},error:function(a,o,n){p.default.getFeatureValue(I.featureConfigFlags.enableWaitingRoom)?console.error("FATAL ERROR! CSDS URL failed. App launch aborted"):(console.log("deploymentData.DRM_SERVER_CONFIG.config",t.DRM_SERVER_CONFIG.config),e.doNextBootStage())}})}else t&&t.DRM_SERVER_CONFIG?(e.cloudConfig=t,e.doNextBootStage()):console.error("FATAL error loading server data!!!")}},error:function(e,t,a){0}})}},{key:"initDRM",value:function(e){var t=!1,a=this;window.VG_WEB_SOCKET_WS=!0,VgePlayback.init({initParams:e},(function(o){if(o.vgStatus.statusType!=VGDRM.StatusTypes.SUCCESS)return o.vgStatus&&o.vgStatus.detailedInfo.statusCode===VGDRM.Statuses.JS_WEBSOCKET_TIMEOUT?void(navigator.onLine?a.props.onBootSequenceCompleted({installRequired:!0,initParams:e}):a.setState({currentStateString:p.default.getLabelByDictionaryId("DIC_ERROR_SIGN_IN_FAILED_NETWORK_REQUIRED")})):o.vgStatus&&o.vgStatus.detailedInfo.statusCode===VGDRM.Statuses.JS_CORE_VERSION_NEWER?void a.props.onBootSequenceCompleted({upgradeRequired:!0,initParams:e}):void window.alert("some other DRM init error");if(o.drmState!==VGDRM.DrmStates.UPGRADE_REQUIRED)if(o.versions&&o.versions.appInternalVersion,(t=o.drmState!=VGDRM.DrmStates.ACTIVATION_REQUIRED)&&(a.drmDeviceId=o.drmData.deviceID,a.drmDeviceName=o.deviceNetworkName),t){if(t){var n=a.bootSequence.indexOf(U);a.bootSequence.splice(n,1)}a.doNextBootStage()}else{var i=a.drmTokenFromURLparam(),l=a.getSetErrorURLparam();i?(history.replaceState({},"Home Page","/"),a.activateDeviceWithToken(i)):l?a.props.onLoginFail&&a.props.onLoginFail():VGDRM.shutdown((function(){a.doNextBootStage()}))}else a.props.onBootSequenceCompleted({upgradeRequired:!0})}))}},{key:"startBootSequence",value:function(){var e=this,t=function(){p.default.getFeatureValue(I.featureConfigFlags.disableSplashScreenOnBootUp)?(e.startBootSequence_internal(),setTimeout((function(){e.setState({zoomSplashCompleted:!0})}),801)):setTimeout((function(){e.setState({zoomSplashCompleted:!0}),e.startBootSequence_internal()}),801)};setTimeout((function(){e.setState({zoomSplashBegan:!0},t)}),10)}},{key:"fireWaitingRoomAPIAtAppLaunch",value:function(e,t){f.default.ajax({url:this.waitingRoomAPI,timeout:2e3,success:function(t){this.isWRApiFired=!0;var a=t,o={};a&&a.status&&"WaitingRoom"===a.status?(o.response=a,o.shouldShowWaitingRoom=!0,o.actionType=I.WaitingRoomActionType.APP_RELOAD,o.errorCode=500,v.default.launchWaitingRoom(o),e(!0)):e(!1)},error:function(e){console.error("Failed to fetch waiting room response"+e),t()}})}},{key:"startBootSequence_internal",value:function(){if(this.getCSDS(),!d.default.FEATURE_CONFIG.ENABLE_DEVICE_AUTHENTICATION){var e=this.bootSequence.indexOf(U);this.bootSequence.splice(e,1),this.doNextBootStage()}}},{key:"setupDRM",value:function(){d.default.CONFIG.DEVICE_ID=this.drmDeviceId,d.default.CONFIG.DEVICE_NAME=this.drmDeviceName}},{key:"selectHeadEnd",value:function(){var e=this;s.default.setConfig(this.sessionGuardString,this.cloudConfig,"../../../staticFiles/config/cloudws/ctapAPIS.json",(function(){s.default.selectEndPoint(d.default.MSO.BACKEND,(function(){e.doNextBootStage()}),(function(){console.error("FAILED TO SELECT BACKEND SERVICE! Can't continue."),e.handleBootFail()}))}),(function(){console.error("FAILED TO CONFIGURE BACKEND SERVICE! Can't continue."),e.handleBootFail()}))}},{key:"loadLocalIAConfig",value:function(){var e=this;f.default.ajax({url:d.default.IA_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(t){d.default.IA_CONFIG_LIST=t;var a=p.default.getApplicationModeIA();p.default.setIAConfigForIAMenu(a)?e.doNextBootStage():console.error("No IA for PCMAC, can't load APP!!!")},error:function(e){console.error("failed to load IA"+e)}})}},{key:"loadSharedResourceDictionary",value:function(){s.default.getSharedResourcesDictionary().then((function(e){var t=C.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[d.default.LANGUAGE.toUpperCase()];if(t||(t=C.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[C.default.UI_LANGUAGES_CONFIG.UI_DEFAULT_LANG]),!p.default.isObjectEmpty(e.data)&&e.data.languageMap&&!p.default.isObjectEmpty(e.data.languageMap)){0;try{N.default.setToLocalStorage(e.data)}catch(e){0}C.default.setRemoteDictionary(e.data.languageMap,t.UI_LANG_KEY),document.dispatchEvent(new CustomEvent(c.default.EVENT_LANGUAGE_UPDATED,{}))}})).catch((function(e){console.error("getSharedResourcesDictionary api failure",e)}))}},{key:"loadUpdateIAConfig",value:function(e){d.default.IA_CONFIG_LIST=e&&e.data;var t=p.default.getApplicationModeIA();p.default.setIAConfigForIAMenu(t)?this.doNextBootStage():console.error("No IA for PCMAC, can't load APP!!!")}},{key:"loadSharedResourceIAConfig",value:function(){var e=this,t=this;s.default.getSharedResourcesIAConfig().then((function(t){e.loadUpdateIAConfig(t)})).catch((function(a){var o=a.response&&a.response.data?a.response.data:a;p.default.getFeatureValue(I.featureConfigFlags.enableWaitingRoom)?v.default.handleWaitingRoom(o,I.WaitingRoomActionType.APP_RELOAD,(function(){t.loadLocalIAConfig()})):e.loadLocalIAConfig()}))}},{key:"loadIAConfig",value:function(){var e=this;!0===p.default.getFeatureValue(I.featureConfigFlags.enableOptimisedBootupflow)?(this.loadSharedResourceDictionary(),this.loadSharedResourceIAConfig()):d.default.FEATURE_CONFIG.LOAD_CUSTOMIZATION_API?s.default.getCustomizationConfig((function(t){var a=C.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[d.default.LANGUAGE.toUpperCase()];if(a||(a=C.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[C.default.UI_LANGUAGES_CONFIG.UI_DEFAULT_LANG]),!p.default.isObjectEmpty(t)&&!p.default.isObjectEmpty(t.dictionary)&&t.dictionary.languageMap&&!p.default.isObjectEmpty(t.dictionary.languageMap)){0;try{N.default.setToLocalStorage(t.dictionary)}catch(t){0,e.loadLocalIAConfig()}C.default.setRemoteDictionary(t.dictionary.languageMap,a.UI_LANG_KEY),document.dispatchEvent(new CustomEvent(c.default.EVENT_LANGUAGE_UPDATED,{}))}d.default.IA_CONFIG_LIST=t;var o=p.default.getApplicationModeIA();p.default.setIAConfigForIAMenu(o)?e.doNextBootStage():console.error("No IA for PCMAC, can't load APP!!!")}),(function(){e.loadLocalIAConfig()})):e.loadLocalIAConfig()}},{key:"loadParentalPolicy",value:function(){var e=this.props.bootSequenceComplete;s.default.getParentalControlsSettings((function(e){e&&e.enforcementTime&&Array.isArray(e.enforcementTime)&&e.enforcementTime.sort((function(e,t){return t.rating-e.rating})),d.default.PARENTAL_POLICIES=e}),(function(e){d.default.PARENTAL_POLICIES={}}),e)}},{key:"loadUILanguage",value:function(){var e=this,t=e.props.bootSequenceComplete;s.default.getUserSettings(t).then((function(t){var a=t.uiLanguage?t.uiLanguage:d.default.LANGUAGE;e.dispatchLanguageUpdateNotificationToRoot(a)})).catch((function(e){0}))}},{key:"dispatchLanguageUpdateNotificationToRoot",value:function(e){d.default.LANGUAGE=e.toUpperCase(),document.dispatchEvent(new CustomEvent(c.default.EVENT_LANGUAGE_UPDATE_REQUESTED,{}))}},{key:"showLandingPage",value:function(){var e=this,t=window.$_CONFIGURE_$.mobileBrowser,a=window.continueToWebClicked;p.default.getFeatureValue(I.featureConfigFlags.showLandingPage)&&t&&1!=a&&!window.location.hash?this.landingPage=!0:setTimeout((function(){e.doNextBootStage()}))}},{key:"installApp",value:function(e){window.open(e,"_self")}},{key:"handleLandingPageClicked",value:function(){document.getElementById("continueButton").style.display="none",document.getElementById("loaderWrapper").style.display="flex",document.getElementById("unSupportedBrowserButton").style.opacity="0.4",document.getElementById("unSupportedBrowserButton").style.pointerEvents="none",console.debug("handleLandingPageClicked->"),window.continueToWebClicked=!0,this.setState({currentBootStage:this.state.currentBootStage+1}),this.performBootStep(this.bootSequence[this.state.currentBootStage])}},{key:"startServiceLayer",value:function(){this.setupDRM();var e=this;s.default.registerCTAPApp();var t=e.props.bootSequenceComplete;!0===p.default.getFeatureValue(I.featureConfigFlags.enableOptimisedBootupflow)?s.default.loadResourcesInitial((function(){e.loadUILanguage(),s.default.getHousehold(e.onGetHouseholdSuccess,t)})):!0===p.default.getFeatureValue(I.featureConfigFlags.enableCdnCaching)?(s.default.loadResourcesInitial(),e.loadUILanguage(),s.default.getHousehold(e.onGetHouseholdSuccess)):(e.loadUILanguage(),s.default.getHousehold(e.onGetHouseholdSuccess))}},{key:"onGetHouseholdSuccess",value:function(e){var t=e;if(t.householdOptions.length&&t.householdOptions.map((function(e){p.default.setHouseHoldFeature(e,!0)})),
/*!houseHoldInfo.has_subscription &&*/d.default.FEATURE_CONFIG.ADVANCE_PURCHASE&&d.default.FEATURE_CONFIG.SELECT_PLAN_REQUIRED){var a=m.default.getSelectPlanUrl(I.AuthorizationType.SELECT_PLAN);this.setState({launchPaymentPage:a})}else this.ifUserSubscribed()}},{key:"ifUserSubscribed",value:function(){var e=this.props.bootSequenceComplete;s.default.getDeviceInfo(null,null,e),this.loadParentalPolicy(),d.default.FEATURE_CONFIG&&d.default.FEATURE_CONFIG.ANALYTICS_FEATURE&&_.default.initializeAnalytics(),s.default.closeAllOpenSessions(),this.loadIAConfig()}},{key:"responseFromServer",value:function(){this.setState({launchPaymentPage:!1}),this.ifUserSubscribed()}},{key:"prefetchLinearChannelData",value:function(){var e=this;setTimeout((function(){e.doNextBootStage()}),0)}},{key:"checkActivationStatus",value:function(){g.default.checkAuthorizationStatus(P,d.default.FEATURE_CONFIG.ENABLE_SIGNIN_POPUP,(function(){}),(function(){}))}},{key:"performBootStep",value:function(e){if(!0!==v.default.getIsWaitingRoomActive())if(e===G)this.selectHeadEnd();else if(e===F)this.showLandingPage();else if(e===U)this.setState({currentStateString:d.default.APP_GENERAL_CONFIG&&d.default.APP_GENERAL_CONFIG.loadingTextConfig&&d.default.APP_GENERAL_CONFIG.loadingTextConfig.ENABLE_LOADING_TEXT?p.default.getLabelByDictionaryId("DIC_SIGN_IN_SIGN_IN"):null}),this.checkActivationStatus();else if(e===P)this.setState({currentStateString:d.default.APP_GENERAL_CONFIG&&d.default.APP_GENERAL_CONFIG.loadingTextConfig&&d.default.APP_GENERAL_CONFIG.loadingTextConfig.ENABLE_LOADING_TEXT?p.default.getLabelByDictionaryId("DIC_LOADING"):null}),p.default.getFeatureValue(I.featureConfigFlags.enableRef_1_6_0)?s.default.getCtapVersion(this.startServiceLayer):this.startServiceLayer();else if(e===b)this.setState({currentStateString:d.default.APP_GENERAL_CONFIG&&d.default.APP_GENERAL_CONFIG.loadingTextConfig&&d.default.APP_GENERAL_CONFIG.loadingTextConfig.ENABLE_LOADING_TEXT?p.default.getLabelByDictionaryId("DIC_LOADING"):null}),this.prefetchLinearChannelData();else if(e===w){this.setState({currentStateString:d.default.APP_GENERAL_CONFIG&&d.default.APP_GENERAL_CONFIG.loadingTextConfig&&d.default.APP_GENERAL_CONFIG.loadingTextConfig.ENABLE_LOADING_TEXT?p.default.getLabelByDictionaryId("DIC_LOADING"):null});var t=this;setTimeout((function(){!0!==v.default.getIsWaitingRoomActive()&&t.props.onBootSequenceCompleted({isExitWaitingRoom:t.isExitWaitingRoom})}),350)}}},{key:"responseFromAuth",value:function(e){e&&e.detail&&e&&e.detail.scope&&d.default.FEATURE_CONFIG.ENABLE_GUEST_USER_LOGIN_MODE&&s.default.setGuestModeStatus();var t=s.default.getGuestModeStatus();e&&e.detail&&e.detail.state===this.bootSequence[this.state.currentBootStage]?(g.default.removeOAuthIframe(e.detail.expires_in,t),s.default.setAccessToken(e.detail.access_token,e.detail.expires_in),this.doNextBootStage()):e&&e.detail&&!1===d.default.FEATURE_CONFIG.ENABLE_OAUTH_IDP_LOGIN_WITHIN_IFRAME?(g.default.removeOAuthIframe(e.detail.expires_in,t),s.default.setAccessToken(e.detail.access_token,e.detail.expires_in),this.setState({currentBootStage:this.state.currentBootStage+1}),this.doNextBootStage()):e&&e.detail&&(g.default.removeOAuthIframe(e.detail.expires_in,t),s.default.setAccessToken(e.detail.access_token,e.detail.expires_in)),e&&e.detail&&e.detail.title&&e.detail.title===p.default.getLabelByDictionaryId("DIC_FAILURE_IN_LOGIN")&&E.default.displayOAuthError(e.detail.keyText,e.detail.title,(function(){window.location.href=window.location.href.split("#")[0]}))}},{key:"loadSplash",value:function(){var e=window.location.href.indexOf("access_token")>-1;return l.default.createElement(i.Suspense,{fallback:l.default.createElement(y.default,{size:48})},l.default.createElement(T,{requiredUrl:d.default.APP_GENERAL_CONFIG.documentInformation?d.default.APP_GENERAL_CONFIG.documentInformation.splashScreenUri:"'",iframeForPaymentSStyle:"bootControllerIframeClassForPayment",paymentOverlayContainerStyle:"bootControllerPaymentOverlayContainerStyle",isLoggedIn:e}))}},{key:"stopCasting",value:function(){if("undefined"!=typeof cast){if(cast&&cast.framework&&chrome.cast&&chrome.cast.media){var e={};e.receiverApplicationId=chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,e.autoJoinPolicy=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,cast.framework.CastContext.getInstance().setOptions(e)}}else 0}},{key:"render",value:function(){if(this.landingPage)return l.default.createElement(h.default,{handleLandingPageClicked:this.handleLandingPageClicked.bind(this),installApp:this.installApp.bind(this)});var e=null,t=null;d.default.APPLICATION_KIDS_MODE_FLAG=p.default.getKidsApplicationMode();var a=this.state.currentBootStage/this.bootSequence.length,o=l.default.createElement(i.Suspense,{fallback:l.default.createElement(y.default,{size:48})}," ",l.default.createElement(O,{progressHeight:3,progressElapsedPercent:a}));t=p.default.getFeatureValue(I.featureConfigFlags.disableSplashScreenOnBootUp)?l.default.createElement(y.default,{size:48}):d.default.FEATURE_CONFIG.VECTOR_SPLASH_SCREEN_ENABLE?this.loadSplash():null,p.default.getFeatureValue(I.featureConfigFlags.chromeCastDisabled)&&p.default.getCurrentBrowser()===I.Browsers.CHROME&&this.stopCasting();var n=this.state.zoomSplashBegan?Object.assign({},this.props.style,{transform:"scale(1.0)"}):this.props.style;return this.state.launchPaymentPage&&(e=l.default.createElement(i.Suspense,{fallback:l.default.createElement(y.default,{size:48})},l.default.createElement(T,{requiredUrl:this.state.launchPaymentPage,iframeForPaymentSStyle:"bootControllerIframeClassForPayment",paymentOverlayContainerStyle:"bootControllerPaymentOverlayContainerStyle"})),n=Object.assign({},n,{height:"100vh",width:"100vw"})),!0===this.state.shouldShowWaitingRoom?l.default.createElement(i.Suspense,{fallback:l.default.createElement(y.default,{size:48})},l.default.createElement(D,{waitingRoomObj:this.waitingRoomObj})):this.isExitWaitingRoom?l.default.createElement(y.default,{size:48}):d.default.FEATURE_CONFIG&&d.default.FEATURE_CONFIG.VECTOR_SPLASH_SCREEN_ENABLE?t:l.default.createElement("div",{style:n,className:"splashContainer"},l.default.createElement("div",{className:"vectorSplashContainer"},t),l.default.createElement("div",{className:"bootControllerAdvancePaymentContainer",style:{display:this.state.launchPaymentPage?"block":"none"}},e),l.default.createElement("div",{className:"splashProgressBar"},l.default.createElement("span",{style:{visibility:this.state.zoomSplashCompleted?"visible":"hidden",opacity:this.state.zoomSplashCompleted?"1":"0",WebkitTransition:c.default.UI_FADE_ANIMATION,transition:c.default.UI_FADE_ANIMATION}},o),l.default.createElement("span",{style:{opacity:this.state.zoomSplashCompleted?"1":"0",WebkitTransition:c.default.UI_FADE_ANIMATION,transition:c.default.UI_FADE_ANIMATION}},this.state.currentStateString)),null)}}]),t}(l.default.Component);B.propTypes={onBootSequenceCompleted:r.default.func,onLoginFail:r.default.func,fadeRootLogo:r.default.func};t.default=(0,u.connect)((function(e){return{bootSequenceComplete:e.common.bootSequenceComplete}}),null,null,{withRef:!0})(B)},1004:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(4),n=r(o),i=a(394),l=r(a(23));function r(e){return e&&e.__esModule?e:{default:e}}t.default=(0,i.withRouter)((function(e){var t=l.default.APP_GENERAL_CONFIG&&l.default.APP_GENERAL_CONFIG.appInstallBarConfig?l.default.APP_GENERAL_CONFIG.appInstallBarConfig:void 0;return(0,o.useEffect)((function(){document.getElementById("unsupportedMobileBrowser").style.display="flex",document.getElementById("mobileSupport").style.display="flex";var e=document.getElementsByClassName("unSupportedBrowserButton");e&&e[0].addEventListener("click",(function(){}))}),[]),n.default.createElement("div",{className:"unsupportedMessageContainer"},n.default.createElement("div",{className:"unsupportedMobileBrowser",id:"unsupportedMobileBrowser"},n.default.createElement("div",{className:"mobileLogoContainer"},n.default.createElement("img",{className:"mbBrowserLogo",src:"staticFiles/images/landingPageImages/landingPage_Logo.png"}),n.default.createElement("h3",{className:"notsupported",id:"notsupportedText"},"If you are using iOS, please download the app from App Store"),n.default.createElement("img",{className:"mobileBrowserLogo",id:"iOS",src:"staticFiles/images/icons/applestore@3x.png",onClick:function(){e.installApp(t&&t.iosUrl)}}),n.default.createElement("h6",{className:"bestViewd",id:"mobileLaunch"},"Android Users"),n.default.createElement("img",{className:"mobileBrowserLogo",id:"android",src:"staticFiles/images/icons/googlestore@3x.png",onClick:function(){e.installApp(t&&t.androidUrl)}}),n.default.createElement("div",{id:"mobileSupport"},n.default.createElement("span",{className:"normalText"},"OR "),n.default.createElement("button",{id:"unSupportedBrowserButton",className:"button unSupportedBrowserButton",onClick:function(){e.handleLandingPageClicked()}},n.default.createElement("a",{id:"continueButton"},"Continue to Web"),n.default.createElement("div",{className:"loaderWrapper",id:"loaderWrapper"},n.default.createElement("div",{className:"loaderWrapper-img"},n.default.createElement("span",{className:"spinner loaderActive loaderLarge m-auto"},n.default.createElement("span",{className:"loaderDot loaderDot_1"})," ",n.default.createElement("span",{className:"loaderDot loaderDot_2"})," ",n.default.createElement("span",{className:"loaderDot loaderDot_3"})))))))))}))},855:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),i=a(4),l=L(i),r=L(a(1)),u=L(a(23)),s=L(a(20)),d=a(10),c=L(a(84)),f=L(a(82)),E=L(a(6)),g=a(393),p=a(394),A=L(a(408)),_=L(a(11)),m=L(a(403)),h=L(a(1002)),I=L(a(170)),S=a(864),C=L(a(396));function L(e){return e&&e.__esModule?e:{default:e}}var N,y=(0,i.lazy)((function(){return Promise.all([a.e(24),a.e(25),a.e(49)]).then(a.t.bind(null,1005,7))})),v="brand_logo.png?"+(new Date).getTime(),R={transform:"scale(0.65)",backgroundImage:"url('./staticFiles/images/"+v+"')"},O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.handleMaxUnauthorizedAttempts=a.handleMaxUnauthorizedAttempts.bind(a),a.setupDRMStateChangeListener=a.setupDRMStateChangeListener.bind(a),a.onDrmStateChanged=a.onDrmStateChanged.bind(a),a.setUpLanguage=a.setUpLanguage.bind(a),a.configureDefaultLanguage=a.configureDefaultLanguage.bind(a),a.loadLocalDictionary=a.loadLocalDictionary.bind(a),a.loadRemoteDictionary=a.loadRemoteDictionary.bind(a),a.dispatchLanguageUpdateNotificationRoot=a.dispatchLanguageUpdateNotificationRoot.bind(a),a.handleLanguageUpdateRequested=a.handleLanguageUpdateRequested.bind(a),a.handleApplicationModeUpdate=a.handleApplicationModeUpdate.bind(a),a.mediaListConfig=a.mediaListConfig.bind(a),a.pageUnload=!1,a.isExitWaitingRoom=!1,a.deeplinkURL="",a.appMode=_.default.getCookie(s.default.APPLICATION_MODE_VALUE)?_.default.getCookie(s.default.APPLICATION_MODE_VALUE):u.default.CONFIG.DEFAULT_APPLICATION_MODE_VALUE,a.state={isBootCompleted:!1,loginFailed:!1,fadeOut:!1,drmInstallRequired:!1,drmUpgradeRequired:!1,maxUnauthorizedAttempts:!1,waitingForLanguageDict:!0,languageLoadingError:!1,dataPageMode:a.appMode},e.history.listen((function(){"/campaign_management"!==a.props.location.pathname&&C.default.resetDeepLinkUrl()})),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"UNSAFE_componentWillMount",value:function(){if(document.removeEventListener(s.default.EVENT_UNAUTHORIZED_MAX_ATTEMPTS,this.handleMaxUnauthorizedAttempts),s.default.isMobilePlatform())try{window.webkit.messageHandlers.iOSNativeInterface.postMessage({setDarkUI:!0})}catch(e){}}},{key:"setUpLanguage",value:function(){var e=void 0;try{e=c.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[c.default.UI_LANGUAGES_CONFIG.UI_DEFAULT_LANG]}catch(e){}var t=u.default.LANGUAGE.toUpperCase();u.default.APPLICATION_MODE_VALUE=_.default.getCookie(s.default.APPLICATION_MODE_VALUE)?_.default.getCookie(s.default.APPLICATION_MODE_VALUE):u.default.CONFIG.DEFAULT_APPLICATION_MODE_VALUE,s.default.setLayoutDirection(s.default.UI_DIRECTION_LTR),d.AppConstants.setLayoutDirection(s.default.UI_DIRECTION_LTR),t?(u.default.LANGUAGE=t,(e=c.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[t])?(s.default.setLayoutDirection(e.DIRECTION.toLowerCase()),d.AppConstants.setLayoutDirection(e.DIRECTION.toLowerCase()),document.body.dir=e.DIRECTION.toLowerCase()):(e=c.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[c.default.UI_LANGUAGES_CONFIG.UI_DEFAULT_LANG],u.default.LANGUAGE="ENG",E.default.updateSettings({uiLanguage:e.UI_LANG_KEY}),document.body.dir=e.DIRECTION.toLowerCase())):e?(u.default.LANGUAGE=e.UI_LANG_KEY,s.default.setLayoutDirection(e.DIRECTION.toLowerCase()),d.AppConstants.setLayoutDirection(e.DIRECTION.toLowerCase()),document.body.dir=e.DIRECTION.toLowerCase()):(u.default.LANGUAGE="ENG",document.body.dir=e.DIRECTION.toLowerCase()),r.default.locale(window.navigator.language),"HEB"===u.default.LANGUAGE?r.default.locale("he"):"POR"===u.default.LANGUAGE&&r.default.locale("pt"),"he"!==window.navigator.language&&"HEB"!==u.default.LANGUAGE||r.default.updateLocale("he",{meridiem:function(e,t,a){return e<12?a?"am":"AM":a?"pm":"PM"}}),this.props.changeLanguage?!0===_.default.getFeatureValue(d.featureConfigFlags.enableOptimisedBootupflow)?this.loadSharedResourcesDictionary(e):this.loadRemoteDictionary(e):this.loadLocalDictionary(e)}},{key:"configureDefaultLanguage",value:function(){var e=this;f.default.ajax({url:"./staticFiles/config/uiLanguagesConfig.json?v=1622724841011",cache:!0,success:function(t){c.default.setConfiguration(t),e.setUpLanguage(!0)},error:function(){console.error("failed to load uiLanguagesConfig.json"),e.setState({languageLoadingError:!0})}})}},{key:"loadLocalDictionary",value:function(e){e||(console.error("failed to load language translation - language object is undefined"),e=c.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[c.default.UI_LANGUAGES_CONFIG.UI_DEFAULT_LANG],u.default.LANGUAGE=c.default.UI_LANGUAGES_CONFIG.UI_DEFAULT_LANG);var t=this,a="locale_{language}.json";a=a.replace("{language}",e.ISO_LANG_CODE),f.default.ajax({url:"/staticFiles/locales/"+a+"?v=1622724841011",cache:!0,success:function(a){c.default.setLocalDictionary(a,e.UI_LANG_KEY),t.dispatchLanguageUpdateNotificationRoot(),t.setState({waitingForLanguageDict:!1})},error:function(){var a="locale_{language}.json";a=a.replace("{language}",u.default.CONFIG.DEFAULT_LANGUAGE_ISO_CODE),f.default.ajax({url:"./staticFiles/locales/"+a+"?v=1622724841011",cache:!0,success:function(a){e=c.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[c.default.UI_LANGUAGES_CONFIG.UI_DEFAULT_LANG],c.default.setLocalDictionary(a,u.default.CONFIG.DEFAULT_LANGUAGE),u.default.LANGUAGE=u.default.CONFIG.DEFAULT_LANGUAGE,t.dispatchLanguageUpdateNotificationRoot(),t.setState({waitingForLanguageDict:!1})},error:function(){console.error("failed to load language translation"),t.setState({languageLoadingError:!0})}})}})}},{key:"loadSharedResourcesDictionary",value:function(e){var t=this;E.default.getSharedResourcesDictionary().then((function(a){if(e||(e=c.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[c.default.UI_LANGUAGES_CONFIG.UI_DEFAULT_LANG]),_.default.isObjectEmpty(a.data)||!a.data.languageMap||_.default.isObjectEmpty(a.data.languageMap))c.default.resetRemoteDictionaryLoaded(),t.loadLocalDictionary(e);else{0;try{A.default.setToLocalStorage(a.data)}catch(a){0,t.loadLocalDictionary(e)}c.default.setRemoteDictionary(a.data.languageMap,e.UI_LANG_KEY),document.dispatchEvent(new CustomEvent(s.default.EVENT_LANGUAGE_UPDATED,{}))}})).catch((function(a){console.error("getSharedResourcesDictionary api failure",a),c.default.resetRemoteDictionaryLoaded(),t.loadLocalDictionary(e)}))}},{key:"loadRemoteDictionary",value:function(e){var t=this;u.default.FEATURE_CONFIG.LOAD_CUSTOMIZATION_API&&!s.default.isMobilePlatform()?E.default.getCustomizationConfig((function(a){if(e||(e=c.default.UI_LANGUAGES_CONFIG.UI_LANGUAGES[c.default.UI_LANGUAGES_CONFIG.UI_DEFAULT_LANG]),_.default.isObjectEmpty(a)||_.default.isObjectEmpty(a.dictionary)||!a.dictionary.languageMap||_.default.isObjectEmpty(a.dictionary.languageMap))c.default.resetRemoteDictionaryLoaded(),t.loadLocalDictionary(e);else{0;try{A.default.setToLocalStorage(a.dictionary)}catch(a){0,t.loadLocalDictionary(e)}c.default.setRemoteDictionary(a.dictionary.languageMap,e.UI_LANG_KEY),document.dispatchEvent(new CustomEvent(s.default.EVENT_LANGUAGE_UPDATED,{}))}}),(function(){c.default.resetRemoteDictionaryLoaded(),t.loadLocalDictionary(e)})):t.loadLocalDictionary(e)}},{key:"dispatchLanguageUpdateNotificationRoot",value:function(){document.dispatchEvent(new CustomEvent(s.default.EVENT_LANGUAGE_UPDATED,{}))}},{key:"handleLanguageUpdateRequested",value:function(){this.setUpLanguage()}},{key:"handleApplicationModeUpdate",value:function(e){e&&this.setState({dataPageMode:e.detail[s.default.APPLICATION_MODE_VALUE]})}},{key:"componentDidMount",value:function(){f.default.ajaxSetup({cache:!1}),this.props.location&&this.props.location.pathname&&"/campaign_management"===this.props.location.pathname?(this.deeplinkURL=window.location&&window.location.href,window.sessionStorage.setItem("deeplinkURL",this.deeplinkURL)):this.deeplinkURL=window.sessionStorage.getItem("deeplinkURL"),document.addEventListener(s.default.EVENT_UNAUTHORIZED_MAX_ATTEMPTS,this.handleMaxUnauthorizedAttempts),document.addEventListener(s.default.EVENT_LANGUAGE_UPDATE_REQUESTED,this.handleLanguageUpdateRequested),document.addEventListener(s.default.EVENT_DEFAULT_APPLICATION_MODE_VALUE_UPDATED,this.handleApplicationModeUpdate);var e=this;window.addEventListener("beforeunload",(function(){e.pageUnload=!0})),this.loadProjectFeaturesConfig(),this.loadDefaultFeaturesConfig(),this.mediaListConfig(),this.configureDefaultLanguage(),this.loadAppGeneralConfig()}},{key:"componentDidUpdate",value:function(e,t){!1===this.state.waitingForLanguageDict&&t.waitingForLanguageDict&&this.refs&&this.refs.bootSequenceControllerRef&&this.refs.bootSequenceControllerRef.getWrappedInstance().startBootSequence()}},{key:"componentWillUnmount",value:function(){document.removeEventListener(s.default.EVENT_DEFAULT_APPLICATION_MODE_VALUE_UPDATED,this.handleApplicationModeUpdate),N&&clearInterval(N)}},{key:"onDrmStateChanged",value:function(e){void 0!==e&&void 0!==e.drmState&&(e.drmState===VgePlayback.DrmStates.INITIALIZATION_REQUIRED&&(s.default.isLoggingOut()||this.pageUnload||window.alert(document.title+": Page Expired - Press OK to Reload."),window.location.reload()))}},{key:"setupDRMStateChangeListener",value:function(){0}},{key:"handleMaxUnauthorizedAttempts",value:function(){var e=this;setTimeout((function(){e.setState({isBootCompleted:!0,loginFailed:!1,maxUnauthorizedAttempts:!0})}),100)}},{key:"handleLoginFailure",value:function(e){var t=this,a="?Sign-In-Error";"drmActivationError"===e&&(a="?DRMA-Activation-Error"),history.replaceState({},"",a),setTimeout((function(){t.setState({isBootCompleted:!0,loginFailed:!0})}),100)}},{key:"handleBootSequenceCompleted",value:function(e){"object"===o(window.sessionStorage)&&window.sessionStorage.setItem("waiting_room_on_app_launch",!0);var t=this;e&&e.isExitWaitingRoom&&(this.isExitWaitingRoom=e.isExitWaitingRoom),E.default.getSignInStatus()&&I.default.sendEvent({},d.CleverTap.customEvent.SIGNED_IN),e&&e.installRequired?this.setState({drmInstallRequired:e}):e&&e.upgradeRequired?this.setState({drmUpgradeRequired:e}):(setTimeout((function(){var e=E.default.getUserSettingsInfo();t.uiLang=e?e.uiLanguage:void 0;var a={};a.category=d.AnalyticsConstants.categories.BOOT,a.event=d.AnalyticsConstants.events.APP_LAUNCHED,a.lang=t.uiLang,a.deeplinkURL=t.deeplinkURL,m.default.eventTriggered(a),I.default.sendEvent({},d.CleverTap.customEvent.WEB_LAUNCH),window.sessionStorage.removeItem("deeplinkURL"),t.setState({isBootCompleted:!0}),t.setupDRMStateChangeListener()}),100),N=setInterval((function(){var e=E.default.getUserSettingsInfo();this.uiLang=e?e.uiLanguage:void 0;var t={};t.category=d.AnalyticsConstants.categories.BOOT,t.event=d.AnalyticsConstants.events.HEARTBEAT,t.lang=this.uiLang,m.default.eventTriggered(t)}),3e5),this.props.setBootSequenceCompleted(!0))}},{key:"handleFadeRootLogoRequested",value:function(){this.setState({fadeOut:!0})}},{key:"loadDateTimeFormatConfig",value:function(){f.default.ajax({url:u.default.DATE_TIME_FORMAT_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.DATE_TIME_FORMAT_CONFIG=e||{}},error:function(){console.log("Fetching "+u.default.DATE_TIME_FORMAT_CONFIG_FILE+"  config file failed")}})}},{key:"loadIconsConfig",value:function(){f.default.ajax({url:u.default.ICONS_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.ICONS_CONFIG=e||{}},error:function(){console.log("Fetching "+u.default.ICONS_CONFIG_FILE+"  config file failed")}})}},{key:"loadSettingsConfig",value:function(){f.default.ajax({url:u.default.SETTINGS_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.SETTINGS_CONFIG=e||{}},error:function(){console.log("Fetching "+u.default.SETTINGS_CONFIG_FILE+"  config file failed")}})}},{key:"loadDefaultFeaturesConfig",value:function(){f.default.ajax({url:"./staticFiles/config/defaultFeatures.json?v=1622724841011",cache:!0,success:function(e){u.default.PRODUCT_DEFAULT_FEATURES=e},error:function(e){console.log("failed to load "+e)}})}},{key:"loadIvpaAnalyticsConfig",value:function(){f.default.ajax({url:u.default.IVPA_ANALYTICS_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.IVPA_ANALYTICS_CONFIG=e||{}},error:function(){console.log("Fetching "+u.default.IVPA_ANALYTICS_CONFIG_FILE+"  config file failed")}})}},{key:"loadGuideConfig",value:function(){f.default.ajax({url:u.default.GUIDE_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.GUIDE_CONFIG=e||{}},error:function(){console.log("Fetching"+u.default.GUIDE_CONFIG_FILE+" config file failed")}})}},{key:"loadActionMenuConfig",value:function(){f.default.ajax({url:u.default.ACTION_MENU_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.ACTION_MENU_CONFIG=e||{}},error:function(){console.log("Fetching "+u.default.ACTION_MENU_CONFIG_FILE+"  config file failed")}})}},{key:"loadAppGeneralConfig",value:function(){f.default.ajax({url:u.default.APP_GENERAL_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.APP_GENERAL_CONFIG=e||{}},error:function(){console.log("Fetching "+u.default.APP_GENERAL_CONFIG_FILE+"  config file failed")}})}},{key:"loadMetaDataTemplateConfig",value:function(){f.default.ajax({url:u.default.METADATA_TEMPLATE_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.METADATA_TEMPLATE_CONFIG=e||{}},error:function(){console.log("Fetching "+u.default.METADATA_TEMPLATE_CONFIG_FILE+"  config file failed")}})}},{key:"loadKidsMetaDataTemplateConfig",value:function(){f.default.ajax({url:u.default.METADATA_KIDS_TEMPLATE_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.METADATA_KIDS_TEMPLATE_CONFIG=e||{}},error:function(){console.log("Fetching "+u.default.METADATA_KIDS_TEMPLATE_CONFIG_FILE+"  config file failed")}})}},{key:"loadUIConfig",value:function(){f.default.ajax({url:u.default.UI_CONFIG_FILE+"?v=1622724841011",cache:!0,success:function(e){u.default.CUSTOM_CONFIG=e&&e.uiConfigurations&&e.uiConfigurations.PCMAC?e.uiConfigurations.PCMAC:{}},error:function(e){console.error("failed to load UI Config file"+e)}})}},{key:"mediaListConfig",value:function(){f.default.ajax({url:"./staticFiles/config/mediaList.json?v=1622724841011",cache:!0,success:function(e){u.default.MEDIA_LIST_CONFIG=e},error:function(e){console.log("failed to load "+e)}})}},{key:"loadProjectFeaturesConfig",value:function(){var e=this;f.default.ajax({url:"./staticFiles/config/featureConfig.json?v=1622724841011",cache:!0,success:function(t){"CUSTOM_CONFIG_TYPE"in t?(u.default.FEATURE_CONFIG=t,e.loadUIConfig(),e.loadDateTimeFormatConfig(),e.loadIconsConfig(),e.loadMetaDataTemplateConfig(),u.default.FEATURE_CONFIG.ANALYTICS_FEATURE&&u.default.FEATURE_CONFIG.ANALYTICS_VENDORS&&u.default.FEATURE_CONFIG.ANALYTICS_VENDORS.indexOf("IVPA")>-1&&e.loadKidsMetaDataTemplateConfig(),e.loadActionMenuConfig(),e.loadSettingsConfig(),e.loadGuideConfig(),u.default.FEATURE_CONFIG.ANALYTICS_FEATURE&&u.default.FEATURE_CONFIG.ANALYTICS_VENDORS.indexOf("IVPA")>-1&&e.loadIvpaAnalyticsConfig()):console.log("No custom config to override, app will run with default props of components")},error:function(e){console.error("failed to load "+e)}})}},{key:"render",value:function(){this.props&&this.props.changeLanguage&&this.setUpLanguage();var e=this.state.languageLoadingError?"Language Loading Error":"";if(this.state.waitingForLanguageDict)return l.default.createElement("div",{id:"loading-container",style:{height:"100vh",width:"100vw",display:"flex",alignContent:"center",alignItems:"center"}},l.default.createElement("div",{style:{margin:"auto",height:48,textAlign:"center"}},l.default.createElement("br",null),l.default.createElement("br",null),e));if(this.state.drmInstallRequired)console.error("Drm install required");else if(this.state.drmUpgradeRequired)console.error("Drm upgrade required");else if(!this.state.isBootCompleted){var t=this.state.fadeOut?"0":"1",a=Object.assign({},R,{opacity:t});return l.default.createElement(h.default,{id:"bootSequenceControllerId",style:a,ref:"bootSequenceControllerRef",onBootSequenceCompleted:this.handleBootSequenceCompleted.bind(this),fadeRootLogo:this.handleFadeRootLogoRequested.bind(this),onLoginFail:this.handleLoginFailure.bind(this)})}return l.default.createElement("div",{id:"topLevelRootViewContainer","data-pagemode":this.state.dataPageMode,style:{position:"absolute",left:0,top:0,width:"100vw",height:"100vh",overflow:"hidden"}},l.default.createElement(y,{deeplinkURL:this.deeplinkURL,loginFailed:this.state.loginFailed,maxUnauthorizedAttempts:this.state.maxUnauthorizedAttempts,mode:this.state.dataPageMode,isExitWaitingRoom:this.isExitWaitingRoom}))}}]),t}(l.default.Component);t.default=(0,p.withRouter)((0,g.connect)((function(e){return{changeLanguage:e.common.changeLanguage}}),(function(e){return{setBootSequenceCompleted:function(t){return e((0,S.setBootSequenceCompleted)(t))}}}))(O))},864:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleShareLinkPopover=t.updateAllChannelsList=t.setAllChannelsList=t.setBootSequenceCompleted=t.getAllChannelsListWithSharedPersonalApis=t.getAllChannelsList=t.copySocialShareUrl=t.getNextAssetOnRestart=t.channelRemoveFavourite=t.channelAddFavourite=t.removeFromFavorite=t.addAssetToFavorite=t.cDVRDeleteBookedAllSeasonEvent=t.cDVRDeleteBookedSeasonEvent=t.cDVRDeleteBookedEpisode=t.cDVRDeleteBookedEvent=t.cDVRCancelBookedAllSeasonEvent=t.cDVRCancelBookedSeasonEvent=t.cDVRCancelBookedEpisode=t.cDVRCancelBookedEvent=t.cDVRBookEvent=t.callBackDispatcher=t.getAssetDetails=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(7));t.getAssetDetails=function(e,t){return{type:o.GET_ASSET_DETAILS,payload:{asset:e,componentIdentifier:t}}},t.callBackDispatcher=function(e,t){return{type:o.CALLBACK_DISPATCHER,payload:{action:e,params:t}}},t.cDVRBookEvent=function(e,t,a,n){return{type:o.CDVR_BOOK_EVENT_REQUEST,payload:{asset:e,bookingType:t,componentIdentifier:a,recordingType:n}}},t.cDVRCancelBookedEvent=function(e,t){return{type:o.CDVR_CANCEL_BOOKED_EVENT_REQUEST,payload:{asset:e,componentIdentifier:t}}},t.cDVRCancelBookedEpisode=function(e,t){return{type:o.CDVR_CANCEL_BOOKED_EPISODE_REQUEST,payload:{asset:e,componentIdentifier:t}}},t.cDVRCancelBookedSeasonEvent=function(e,t){return{type:o.CDVR_CANCEL_BOOKED_SEASON_REQUEST,payload:{asset:e,componentIdentifier:t}}},t.cDVRCancelBookedAllSeasonEvent=function(e,t,a){return{type:o.CDVR_CANCEL_BOOKED_ALLSEASON_REQUEST,payload:{asset:e,componentIdentifier:t,history:a}}},t.cDVRDeleteBookedEvent=function(e,t,a){return{type:o.CDVR_DELETE_BOOKED_EVENT_REQUEST,payload:{asset:e,componentIdentifier:t,deleteFlag:a}}},t.cDVRDeleteBookedEpisode=function(e,t,a,n){return{type:o.CDVR_DELETE_BOOKED_EPISODE_REQUEST,payload:{asset:e,componentIdentifier:t,deleteFlag:a,history:n}}},t.cDVRDeleteBookedSeasonEvent=function(e,t,a){return{type:o.CDVR_DELETE_BOOKED_SEASON_REQUEST,payload:{asset:e,componentIdentifier:t,deleteFlag:a}}},t.cDVRDeleteBookedAllSeasonEvent=function(e,t,a){return{type:o.CDVR_DELETE_BOOKED_ALLSEASON_REQUEST,payload:{asset:e,componentIdentifier:t,deleteFlag:a}}},t.addAssetToFavorite=function(e,t){return{type:o.ADD_TO_FAVORITE,payload:{asset:e,componentIdentifier:t}}},t.removeFromFavorite=function(e,t,a){return{type:o.REMOVE_FROM_FAVORITE,payload:{asset:e,componentIdentifier:t,screenId:a}}},t.channelAddFavourite=function(e,t){return{type:o.ADD_CHANNEL_FAVORITE_REQUEST,payload:{asset:e,componentIdentifier:t}}},t.channelRemoveFavourite=function(e,t,a){return{type:o.REMOVE_CHANNEL_FAVORITE_REQUEST,payload:{asset:e,componentIdentifier:t,screenId:a}}},t.getNextAssetOnRestart=function(e){return{type:o.GET_NEXT_ASSET_ON_RESTART,payload:{assetObject:e}}},t.copySocialShareUrl=function(e){return{type:o.SET_SHARE_LINK_URL,payload:{postData:e}}},t.getAllChannelsList=function(e){return{type:o.GET_ALL_CHANNELS_LIST_REQUEST,payload:e}},t.getAllChannelsListWithSharedPersonalApis=function(e){return{type:o.GET_ALL_CHANNELS_LIST_REQUEST_WITH_SHARED_PERSONAL_APIS,payload:e}},t.setBootSequenceCompleted=function(e){return{type:o.SET_BOOTSEQUENCE_COMPLETED,payload:e}},t.setAllChannelsList=function(e){return{type:o.SET_ALL_CHANNELS_SUCCESS,payload:e}},t.updateAllChannelsList=function(e){return{type:o.UPDATE_CHANNEL_DATA_SUCCESS,payload:e}},t.handleShareLinkPopover=function(e){return{type:o.SET_ENABLE_SHARE_LINK,payload:e}}},877:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),n=r(a(4)),i=r(a(27)),l=r(a(23));function r(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.getSpinner=a.getSpinner.bind(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"getSpinner",value:function(){return l.default.FEATURE_CONFIG.USE_GIF_IMAGE_FOR_LOADER?n.default.createElement("div",{id:"spinner",className:"hubStackImgSpinner",style:{width:this.props.size,height:this.props.size,margin:"60 auto"}}):n.default.createElement("div",{id:"spinner",className:"loader",style:{border:"0.18em solid grey",borderLeft:"0.18em solid "+this.props.color,width:this.props.size,height:this.props.size}})}},{key:"render",value:function(){var e=this.getSpinner();return n.default.createElement("div",null,e)}}]),t}(n.default.Component);t.default=u,u.propTypes={color:i.default.string.isRequired,size:i.default.number.isRequired}},907:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=u(a(4)),n=u(a(877)),i=u(a(11)),l=u(a(20)),r=u(a(23));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=r.default.APP_GENERAL_CONFIG&&r.default.APP_GENERAL_CONFIG.loadingTextConfig&&r.default.APP_GENERAL_CONFIG.loadingTextConfig.ENABLE_LOADING_TEXT?i.default.getLabelByDictionaryId("DIC_LOADING"):null;return o.default.createElement("div",{className:"loaderContainer"},o.default.createElement("div",{className:"spinnerContainer"},o.default.createElement(n.default,{color:l.default.UI_DEFAULT_TEXT_COLOR,size:48})),o.default.createElement("div",{className:"loaderMessage"}," ",e," "))}}}]);