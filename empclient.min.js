D_EMP_CLIENT_BUILD_DATE="2019-08-02 13:54:54+02:00",D_EMP_CLIENT_VERSION="3.7.0.3";var global=window;void 0===global&&"undefined"!=typeof self&&(global=self),global.Agama={Sessions:{},Reporting:{},InternalDefinitions:{},Utils:{},Kvs:{}},function(a){"use strict";a.LogLevel={FATAL:1,ERROR:2,WARNING:3,INFO:4,DEBUG:5,INTERNAL:6};var r=a.LogLevel.WARNING;a.setLogLevel=function(e){r=e},a.getLogLevel=function(){return r},a.log=function(e,t){if(window.console&&console.log){if(r<e)return;"string"!=typeof t&&(t=JSON.stringify(t));var n=Array.prototype.slice.call(arguments),i=["["+function(e){for(var t=Object.keys(a.LogLevel),n=0;n<t.length;n++)if(a.LogLevel[t[n]]===e)return t[n];return"N/A"}(e)+"] "+t];i=i.concat(n.slice(2)),console.log.apply(console,i)}},a.ViewState={PAUSED:1,PLAYING:2,FASTFORWARDING:3,REWINDING:4,FAILED:5,INITIAL_BUFFERING:6,STALLED:7,NO_ACCESS:8,SEEK:9},a.DsProtocol={UNDEFINED:0,APPLE_HLS:1,MS_SMOOTH:2,ADOBE_HDS:3,MPEG_DASH:4},a.DsPlaylistType={EVENT:1,VOD:2,LIVE:3},a.VodProtocol={UNDEFINED:0,HTTP:1,RTSP:2},a.ShutdownType={NORMAL_SHUTDOWN:1,REBOOT:2,HARD_STANDBY:3,RESTART:4,ABNORMAL_TERMINATION:5}}(global.Agama),function(e){"use strict";function t(e){if(null==e)throw new Error("Cannot create enum from null or undefined.");var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n}e.InternalDefinitions.EMP_PROTOCOL_VERSION=19,e.InternalDefinitions.NR_OF_ERROR_METRICS=3,e.InternalDefinitions.ERROR_MS_RESOLUTION=1e3,e.InternalDefinitions.ReportFlags={first_report:1,scrambling_info_0:16,scrambling_info_1:32,id_report:64,reserved:128},e.InternalDefinitions.ProtocolTags={mcast_state_tag:0,idle_state_tag:2,timeshift_state_tag:5,undefined_active_state_tag:8,vod_state_tag:9,failed_state_tag:10,dvb_c_state_tag:11,dvb_s_state_tag:12,dvb_t_state_tag:13,dvb_c_timeshift_state_tag:14,dvb_s_timeshift_state_tag:15,dvb_t_timeshift_state_tag:16,extended_dynamic_streaming_state_tag:19,pvr_state_tag:18,mcast_ipv4_ipv6_state_tag:21,timeshift_ipv4_ipv6_state_tag:22,session_id_tag:256,service_unavailable_tag:8192,measurement_CC_UINT16_tag:8224,measurement_CC_UINT32_tag:8225,measurement_SI_tag:8226,measurement_DER_tag:8227,measurement_GAUGE_MIN_tag:8228,measurement_GAUGE_MAX_tag:8229,measurement_LAST_UINT16_tag:8230,measurement_LAST_UINT32_tag:8231,nr_of_suppressed_distortions_tag:12288,nr_of_rtp_packages_tag:12289,initial_buffering_time_tag:12290,initial_random_access_time_tag:12291,de_jitter_buffer_size_in_kilobyte_tag:12292,tr135_severe_loss_min_distance_tag:12293,channel_change_time_tag:16384,state_time_tag:20480,state_time_ms_tag:20481,first_errored_ms_tag:8210,second_errored_ms_tag:8211,third_errored_ms_tag:8212,stb_ip_tag:32769,report_interval_tag:32771,id_report_interval_tag:32772,stb_serial_number_tag:33024,stb_manufacturer_tag:33025,stb_model_tag:33026,stb_chipset_tag:33027,libempclient_version_tag:33028,empclient_integration_version_tag:33029,platform_version_tag:33030,firmware_version_tag:33031,middleware_tag:33032,middleware_version_tag:33033,ca_system_tag:33034,edid_information_tag:33035,configuration_string_tag:33036,configuration_set_from_tag:33037,config_holdoff_tag:33040,config_substate_holdoff_tag:33041,config_errored_ms_resolution_tag:33043,config_first_errored_ms_mask_tag:33044,config_second_errored_ms_mask_tag:33045,config_third_errored_ms_mask_tag:33046,libempclient_builddate_tag:33048,empclient_integration_builddate_tag:33049,service_group_tag:33051,integration_specific_probe_metadata_tag:33056,disk_size_tag:33057,wan_link_speed_tag:33058,wlan_channel_tag:33059,wlan_bandwidth_tag:33060,wlan_channel_bandwidth_tag:33061,stb_external_id_tag:33062,location_description_tag:33063,smartcard_id_tag:33064,ca_pairing_id_tag:33065,ca_entitlement_tag:33066,parental_control_parameters_tag:33067,user_pin_code_tag:33068,system_uptime_tag:33069,system_current_time_tag:33070,user_account_id_tag:33071,device_type_tag:33072,soft_standby_duration_tag:33073,device_id_tag:33075,service_status_tag:33076,emm_tag:33077,rf_tag:33078,network_tag:33079,multiscreen_tag:33080,series_5_data_tag:33081,soft_standby_duration_ms_tag:33082,use_errored_seconds_semantics_tag:33083,config_report_delay_time_tag:33086,config_use_redirect_uri_tag:33087,device_ip_tag:33088,hdd_parameters_tag:33089,device_os_tag:33090,device_browser_tag:33091,application_tag:33092,application_version_tag:33093,device_latitude_tag:33094,device_longitude_tag:33095,probe_metadata_connection_type_tag:33096,view_state_tag:36864,view_state_extended_tag:36865,view_state_ms_tag:36866,view_state_extended_ms_tag:36867,mcast_join_tag:40960,mcast_igmp_join_time_tag:40961,mcast_igmp_leave_time_tag:40963,timeshift_delay_time_tag:42242,vod_parameters_tag:43264,vod_setup_delay_tag:43265,vod_rtsp_setup_time_tag:43266,vod_rtsp_teardown_time_tag:43267,tuned_frequency_tag:43777,tuning_time_tag:43778,rf_modulation_tag:43779,rf_symbolrate_tag:43780,rf_standard_tag:43781,ds_nr_of_segment_buffers_tag:44032,ds_segment_buffer_size_tag:44033,ds_nr_of_prebuffered_segments_tag:44034,ds_segment_prebuffer_size_tag:44035,ds_originating_source_tag:44036,ds_originating_server_manifest_tag:44037,ds_originating_server_segment_tag:44038,ds_initial_profile_tag:44039,ds_nr_of_content_profiles_tag:44040,ds_manifest_file_tag:44041,hls_initial_patpmt_tag:44042,ds_playlist_type_tag:44043,ds_exit_before_initial_play_tag:44044,ds_exit_while_stalled_tag:44045,ds_initial_profile_bitrate_tag:44046,ds_final_profile_bitrate_tag:44047,ds_initial_profile_nr_tag:44048,ds_final_profile_nr_tag:44049,ds_initial_segment_source_ip_tag:44050,ds_final_segment_source_ip_tag:44051,ds_initial_manifest_source_ip_tag:44052,ds_final_manifest_source_ip_tag:44053,generic_state_description_tag:44800,content_title_tag:44801,content_description_tag:44802,specified_duration_tag:44803,nr_of_redirects_tag:44804,data_connection_type_tag:44805,ip_negotiated_bitrate_tag:44806,content_ca_system_tag:44807,content_service_title_tag:44808,content_type_tag:44809,session_event_int_integer_tag:45056,session_event_int_double_tag:45057,session_event_int_text_tag:45058,session_event_int_binary_tag:45059,session_event_int_json_tag:45060,session_event_ext_text_tag:45312,session_event_ext_json_tag:45313};var n=e.InternalDefinitions.ProtocolTags,i={NO_STATE:0,IDLE_STATE:4,EXTENDED_DYNAMIC_STREAMING_STATE:262144,MCAST_STATE:1,MCAST_TIMESHIFT_STATE:32,ZAP_STATE:64,PVR_STATE:128,UNDEFINED_ACTIVE_STATE:256,FAILED_STATE:512,VOD_STATE:1024,DVB_C_STATE:2048,DVB_S_STATE:4096,DVB_T_STATE:8192,DVB_C_TIMESHIFT_STATE:16384,DVB_S_TIMESHIFT_STATE:32768,DVB_T_TIMESHIFT_STATE:65536};i.IDLE_STATES=i.IDLE_STATE|i.FAILED_STATE|i.ZAP_STATE|i.UNDEFINED_ACTIVE_STATE,i.RF_STATES=i.DVB_C_STATE|i.DVB_C_TIMESHIFT_STATE|i.DVB_S_STATE|i.DVB_S_TIMESHIFT_STATE|i.DVB_T_STATE|i.DVB_T_TIMESHIFT_STATE,i.MCAST_STATES=i.MCAST_STATE|i.MCAST_TIMESHIFT_STATE,i.TIMESHIFT_STATES=i.MCAST_TIMESHIFT_STATE|i.DVB_C_TIMESHIFT_STATE|i.DVB_S_TIMESHIFT_STATE|i.DVB_T_TIMESHIFT_STATE,i.BROADCAST_TV_STATES=i.RF_STATES|i.MCAST_STATES,i.IP_STATES=i.MCAST_STATES|i.VOD_STATE,i.QOE_STATES=i.VOD_STATE|i.RF_STATES|i.TIMESHIFT_STATES|i.MCAST_STATES|i.EXTENDED_DYNAMIC_STREAMING_STATE|i.PVR_STATE,i.STATES_IMPLEMENTING_VIEW_STATES=i.STATES_IMPLEMENTING_VIEW_STATES=i.VOD_STATE|i.TIMESHIFT_STATES|i.PVR_STATE|i.EXTENDED_DYNAMIC_STREAMING_STATE,i.ALL_STATES=i.IDLE_STATES|i.QOE_STATES,e.InternalDefinitions.State=i;e.DtvDeliverySystem={DVB_C:0,DVB_S:1,DVB_T:2,IP:3,ATSC:4,ISDB_T:5};var a={SI:"SI",DER:"DER",CC_UINT16:"CC_UINT16",CC_UINT32:"CC_UINT32",GAUGE_MIN:"GAUGE_MIN",GAUGE_MAX:"GAUGE_MAX",LAST_UINT16:"LAST_UINT16",LAST_UINT32:"LAST_UINT32"};e.InternalDefinitions.MeasurementType=a;var r={PERCENTAGE:"PERCENTAGE",INTEGER_VALUED:"INTEGER_VALUED",REAL_VALUED:"REAL_VALUED",TEXT_VALUED:"TEXT_VALUED"};function s(e,t,n,i,a,r,s){if(null==e)throw new Error("The measurementType is null or undefined.");if(null==t)throw new Error("The allowedRange is null or undefined.");if(null==n)throw new Error("The tagId is null or undefined.");if(null==i)throw new Error("The erroredMsMask is null or undefined.");if(null==a)throw new Error("The respectHoldoff is null or undefined.");if(null==r)throw new Error("The holdoffJustInPlaying is null or undefined.");if(null==s)throw new Error("The relevantStates is null or undefined.");this.type=e,this.allowedRange=t,this.tagId=n,this.erroredMsMask=i,this.respectHoldoff=a,this.validOnlyInPlaying=r,this.state=s}e.InternalDefinitions.AllowedRange=r;var _=65534;e.InternalDefinitions.MeasurementSpecification={AUDIO_BUFFER_OVERFLOW:new s(a.CC_UINT16,r.INTEGER_VALUED,1,6,!0,!0,i.QOE_STATES),AUDIO_BUFFER_UNDERFLOW:new s(a.CC_UINT16,r.INTEGER_VALUED,2,7,!0,!0,i.QOE_STATES),AUDIO_DECODING_ERROR:new s(a.CC_UINT16,r.INTEGER_VALUED,3,9,!0,!0,i.QOE_STATES),AUDIO_DISCONTINUITY:new s(a.CC_UINT16,r.INTEGER_VALUED,4,13,!0,!0,i.QOE_STATES),AUDIO_OUT_OF_SYNC_ERROR:new s(a.CC_UINT16,r.INTEGER_VALUED,5,11,!0,!0,i.QOE_STATES),CPU_USAGE:new s(a.SI,r.PERCENTAGE,1,-1,!1,!1,i.ALL_STATES),FREE_MEMORY:new s(a.SI,r.INTEGER_VALUED,3,-1,!1,!1,i.ALL_STATES),CURRENT_NUMBER_OF_RECORDINGS:new s(a.SI,r.INTEGER_VALUED,12,-1,!1,!1,i.ALL_STATES),FAN_RPM:new s(a.SI,r.INTEGER_VALUED,2,-1,!1,!1,i.ALL_STATES),FEC_CORRECTED_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,1,15,!0,!1,i.QOE_STATES),FEC_UNCORRECTED_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,2,16,!0,!1,i.QOE_STATES),FREE_DISK_SPACE:new s(a.SI,r.INTEGER_VALUED,13,-1,!1,!1,i.ALL_STATES),HD_TEMPERATURE:new s(a.SI,r.INTEGER_VALUED,4,-1,!1,!1,i.ALL_STATES),HDCP_AUTHENTICATIONS_FAILED:new s(a.CC_UINT16,r.INTEGER_VALUED,6,-1,!1,!1,i.ALL_STATES),HDCP_AUTHENTICATIONS_SUCCEDED:new s(a.CC_UINT16,r.INTEGER_VALUED,7,-1,!1,!1,i.ALL_STATES),IP_INTERFACE_BITRATE:new s(a.SI,r.INTEGER_VALUED,5,-1,!1,!1,i.ALL_STATES),IP_STREAM_BITRATE:new s(a.SI,r.INTEGER_VALUED,6,-1,!1,!1,i.IP_STATES),NON_AV_DISCONTINUITY:new s(a.CC_UINT16,r.INTEGER_VALUED,8,-1,!0,!0,i.QOE_STATES),RF_BER:new s(a.SI,r.REAL_VALUED,7,-1,!1,!1,i.RF_STATES),RF_BER_PREVITERBI:new s(a.SI,r.REAL_VALUED,14,-1,!1,!1,i.RF_STATES),RF_BER_POSTVITERBI:new s(a.SI,r.REAL_VALUED,15,-1,!1,!1,i.RF_STATES),RF_MER:new s(a.SI,r.REAL_VALUED,16,-1,!1,!1,i.RF_STATES),RF_SIGNAL_STRENGTH:new s(a.SI,r.PERCENTAGE,8,-1,!1,!1,i.RF_STATES),RF_SIGNAL_STRENGTH_DBMV:new s(a.SI,r.REAL_VALUED,17,-1,!1,!1,i.RF_STATES),RF_SNR:new s(a.SI,r.REAL_VALUED,9,-1,!1,!1,i.RF_STATES),RF_UNCORRECTED_BLOCK_ERRORS:new s(a.CC_UINT32,r.INTEGER_VALUED,3,-1,!0,!1,i.RF_STATES),RTP_DROPPED_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,4,17,!0,!1,i.IP_STATES),RTP_LATE_PACKET_DROPPED_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,5,-1,!0,!1,i.IP_STATES),RTP_DUPLICATED_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,24,-1,!0,!1,i.IP_STATES),RTP_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,6,-1,!0,!1,i.IP_STATES),RTP_LOST_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,25,14,!0,!1,i.IP_STATES),RTP_REORDERED_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,23,-1,!0,!1,i.IP_STATES),SOURCE_BUFFER_OVERFLOW:new s(a.CC_UINT16,r.INTEGER_VALUED,9,2,!0,!0,i.QOE_STATES),SOURCE_BUFFER_UNDERFLOW:new s(a.CC_UINT16,r.INTEGER_VALUED,10,3,!0,!0,i.QOE_STATES),TIMESHIFT_DELAY:new s(a.SI,r.INTEGER_VALUED,10,-1,!1,!1,i.TIMESHIFT_STATES),TR135_GMIN:new s(a.GAUGE_MIN,r.INTEGER_VALUED,1,-1,!1,!1,i.QOE_STATES),TR135_LOSS_EVENTS:new s(a.CC_UINT32,r.INTEGER_VALUED,7,-1,!0,!1,i.QOE_STATES),TR135_LOSS_EVENTS_BEFORE_EC:new s(a.CC_UINT32,r.INTEGER_VALUED,8,-1,!0,!1,i.QOE_STATES),TR135_MAXIMUM_LOSS_PERIOD:new s(a.GAUGE_MAX,r.INTEGER_VALUED,1,-1,!1,!1,i.QOE_STATES),TR135_MINIMUM_LOSS_DISTANCE:new s(a.GAUGE_MIN,r.INTEGER_VALUED,2,-1,!1,!1,i.QOE_STATES),TR135_OVERRUNS:new s(a.CC_UINT16,r.INTEGER_VALUED,11,-1,!0,!1,i.QOE_STATES),TR135_SEVERE_LOSS_INDEX_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,9,-1,!0,!1,i.QOE_STATES),TR135_UNDERRUNS:new s(a.CC_UINT16,r.INTEGER_VALUED,12,-1,!0,!1,i.QOE_STATES),TS_STREAM_BITRATE:new s(a.SI,r.INTEGER_VALUED,11,-1,!1,!1,i.QOE_STATES),UI_REACTIVITY_TIME:new s(a.DER,r.INTEGER_VALUED,1,-1,!1,!1,i.ALL_STATES),VIDEO_BUFFER_OVERFLOW:new s(a.CC_UINT16,r.INTEGER_VALUED,13,4,!0,!0,i.QOE_STATES),VIDEO_BUFFER_UNDERFLOW:new s(a.CC_UINT16,r.INTEGER_VALUED,14,5,!0,!0,i.QOE_STATES),VIDEO_DECODING_ERROR:new s(a.CC_UINT16,r.INTEGER_VALUED,15,8,!0,!0,i.QOE_STATES),VIDEO_DISCONTINUITY:new s(a.CC_UINT16,r.INTEGER_VALUED,16,12,!0,!0,i.QOE_STATES),VIDEO_OUT_OF_SYNC_ERROR:new s(a.CC_UINT16,r.INTEGER_VALUED,17,10,!0,!0,i.QOE_STATES),VQE_CHANNEL_CHANGE_REQUESTS:new s(a.CC_UINT16,r.INTEGER_VALUED,18,-1,!1,!1,i.IP_STATES),VQE_POST_REPAIR_LOSSES_RCC:new s(a.CC_UINT16,r.INTEGER_VALUED,19,-1,!1,!1,i.IP_STATES),VQE_PRIMARY_RTCP_INPUTS:new s(a.CC_UINT32,r.INTEGER_VALUED,10,-1,!0,!1,i.IP_STATES),VQE_PRIMARY_RTCP_OUTPUTS:new s(a.CC_UINT32,r.INTEGER_VALUED,11,-1,!0,!1,i.IP_STATES),VQE_RCC_ABORTS_BURST_ACTIVITY:new s(a.CC_UINT16,r.INTEGER_VALUED,20,-1,!1,!1,i.IP_STATES),VQE_RCC_ABORTS_BURST_START:new s(a.CC_UINT16,r.INTEGER_VALUED,21,-1,!1,!1,i.IP_STATES),VQE_RCC_ABORTS_OTHER:new s(a.CC_UINT16,r.INTEGER_VALUED,22,-1,!1,!1,i.IP_STATES),VQE_RCC_ABORTS_RESPONSE_INVALID:new s(a.CC_UINT16,r.INTEGER_VALUED,23,-1,!1,!1,i.IP_STATES),VQE_RCC_ABORTS_RESPONSE_TIMEOUT:new s(a.CC_UINT16,r.INTEGER_VALUED,24,-1,!1,!1,i.IP_STATES),VQE_RCC_ABORTS_SERVER_REJECT:new s(a.CC_UINT16,r.INTEGER_VALUED,25,-1,!1,!1,i.IP_STATES),VQE_RCC_ABORTS_STUN_TIMEOUT:new s(a.CC_UINT16,r.INTEGER_VALUED,26,-1,!1,!1,i.IP_STATES),VQE_RCC_ABORTS_TOTAL:new s(a.CC_UINT16,r.INTEGER_VALUED,27,-1,!1,!1,i.IP_STATES),VQE_RCC_REQUESTS:new s(a.CC_UINT16,r.INTEGER_VALUED,28,-1,!1,!1,i.IP_STATES),VQE_REPAIR_RTCP_INPUTS:new s(a.CC_UINT32,r.INTEGER_VALUED,12,-1,!0,!1,i.IP_STATES),VQE_REPAIR_RTCP_STUN_INPUTS:new s(a.CC_UINT32,r.INTEGER_VALUED,13,-1,!0,!1,i.IP_STATES),VQE_REPAIR_RTCP_STUN_OUTPUTS:new s(a.CC_UINT32,r.INTEGER_VALUED,14,-1,!0,!1,i.IP_STATES),RET_PACKET_DROPS:new s(a.CC_UINT32,r.INTEGER_VALUED,15,-1,!0,!1,i.IP_STATES),RET_PACKET_DROPS_LATE:new s(a.CC_UINT32,r.INTEGER_VALUED,16,-1,!0,!1,i.IP_STATES),RET_PACKETS_RECEIVED:new s(a.CC_UINT32,r.INTEGER_VALUED,17,-1,!0,!1,i.IP_STATES),VQE_REPAIR_RTP_STUN_INPUTS:new s(a.CC_UINT32,r.INTEGER_VALUED,18,-1,!0,!1,i.IP_STATES),VQE_REPAIR_RTP_STUN_OUTPUTS:new s(a.CC_UINT32,r.INTEGER_VALUED,19,-1,!0,!1,i.IP_STATES),RET_REQUESTS_POLICED:new s(a.CC_UINT32,r.INTEGER_VALUED,20,-1,!1,!1,i.IP_STATES),RET_REQUESTS:new s(a.CC_UINT32,r.INTEGER_VALUED,21,-1,!1,!1,i.IP_STATES),VQE_TUNER_QUEUE_DROPS:new s(a.CC_UINT32,r.INTEGER_VALUED,22,-1,!0,!1,i.IP_STATES),VQE_UNDERRUNS:new s(a.CC_UINT16,r.INTEGER_VALUED,29,-1,!1,!1,i.IP_STATES),WAN_RX_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,26,-1,!1,!1,i.ALL_STATES),WAN_RX_BYTE_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,27,-1,!1,!1,i.ALL_STATES),WAN_RX_CRC_ERROR_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,28,-1,!1,!1,i.ALL_STATES),WAN_RX_LOST_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,29,-1,!1,!1,i.ALL_STATES),WAN_TX_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,30,-1,!1,!1,i.ALL_STATES),WAN_TX_BYTE_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,31,-1,!1,!1,i.ALL_STATES),WAN_TX_LOST_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,32,-1,!1,!1,i.ALL_STATES),WLAN_RX_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,33,-1,!1,!1,i.ALL_STATES),WLAN_RX_BYTE_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,34,-1,!1,!1,i.ALL_STATES),WLAN_RX_CRC_ERROR_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,35,-1,!1,!1,i.ALL_STATES),WLAN_TX_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,36,-1,!1,!1,i.ALL_STATES),WLAN_TX_BYTE_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,37,-1,!1,!1,i.ALL_STATES),WLAN_TX_SUCCESSFUL_PACKETS:new s(a.CC_UINT32,r.INTEGER_VALUED,38,-1,!1,!1,i.ALL_STATES),WLAN_TX_PACKET_RETRY_COUNTS:new s(a.CC_UINT32,r.INTEGER_VALUED,39,-1,!1,!1,i.ALL_STATES),RET_CORRECTED_PACKET_COUNT:new s(a.CC_UINT32,r.INTEGER_VALUED,40,-1,!1,!1,i.IP_STATES),RET_PACKETS_REQUESTED:new s(a.CC_UINT32,r.INTEGER_VALUED,41,-1,!1,!1,i.IP_STATES),RET_MAX_HOLE_SIZE:new s(a.GAUGE_MAX,r.INTEGER_VALUED,2,-1,!1,!1,i.IP_STATES),DS_NR_OF_CONTENT_PROFILE_BITRATE_DOWN_CHANGES:new s(a.CC_UINT16,r.INTEGER_VALUED,30,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_CONTENT_PROFILE_BITRATE_UP_CHANGES:new s(a.CC_UINT16,r.INTEGER_VALUED,31,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_SEGMENTS_REQUESTED:new s(a.CC_UINT16,r.INTEGER_VALUED,32,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_SEGMENTS_RECEIVED:new s(a.CC_UINT16,r.INTEGER_VALUED,33,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_SEGMENT_TIMEOUTS:new s(a.CC_UINT16,r.INTEGER_VALUED,34,-1,!0,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_SEGMENT_FAILURES:new s(a.CC_UINT16,r.INTEGER_VALUED,35,-1,!0,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_SEGMENT_UNDERRUNS:new s(a.CC_UINT16,r.INTEGER_VALUED,36,-1,!0,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_SEGMENT_READ_BITRATE:new s(a.DER,r.INTEGER_VALUED,2,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_SEGMENT_PROFILE_BITRATE:new s(a.DER,r.INTEGER_VALUED,3,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_SEGMENT_NR_READ_BITRATE_BELOW_PROFILE:new s(a.CC_UINT16,r.INTEGER_VALUED,37,-1,!0,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_SEGMENTS_TOTAL_TIME:new s(a.CC_UINT16,r.INTEGER_VALUED,38,-1,!0,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_SEGMENT_BUFFER_LEVEL:new s(a.SI,r.INTEGER_VALUED,18,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),APPLICATION_STARTUP_TIME:new s(a.DER,r.INTEGER_VALUED,4,-1,!1,!1,i.ALL_STATES),BYTES_RECEIVED:new s(a.CC_UINT32,r.INTEGER_VALUED,42,-1,!1,!1,i.ALL_STATES),NR_OF_FRAMES_ENCODED:new s(a.CC_UINT32,r.INTEGER_VALUED,43,-1,!1,!1,i.ALL_STATES),NR_OF_FRAMES_DROPPED:new s(a.CC_UINT32,r.INTEGER_VALUED,44,18,!0,!1,i.ALL_STATES),WLAN_SIGNAL_STRENGTH:new s(a.SI,r.PERCENTAGE,19,-1,!1,!1,i.ALL_STATES),WLAN_SIGNAL_STRENGTH_DBMV:new s(a.SI,r.REAL_VALUED,20,-1,!1,!1,i.ALL_STATES),WLAN_SIGNAL_STRENGTH_DBM:new s(a.SI,r.REAL_VALUED,27,-1,!1,!1,i.ALL_STATES),WLAN_PER:new s(a.SI,r.PERCENTAGE,21,-1,!1,!1,i.ALL_STATES),WLAN_SNR:new s(a.SI,r.REAL_VALUED,22,-1,!1,!1,i.ALL_STATES),MOBILE_SIGNAL_STRENGTH:new s(a.SI,r.PERCENTAGE,23,-1,!1,!1,i.ALL_STATES),MOBILE_SIGNAL_STRENGTH_DBMV:new s(a.SI,r.REAL_VALUED,24,-1,!1,!1,i.ALL_STATES),MOBILE_SIGNAL_STRENGTH_DBM:new s(a.SI,r.REAL_VALUED,26,-1,!1,!1,i.ALL_STATES),MOBILE_SNR:new s(a.SI,r.REAL_VALUED,25,-1,!1,!1,i.ALL_STATES),DS_NR_OF_REQUESTS:new s(a.CC_UINT16,r.INTEGER_VALUED,39,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_REQUEST_ERRORS:new s(a.CC_UINT16,r.INTEGER_VALUED,40,-1,!0,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_SEGMENT_PROFILE_NR:new s(a.DER,r.INTEGER_VALUED,5,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_SEGMENT_SOURCE_IP:new s(a.DER,r.TEXT_VALUED,_,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_MANIFEST_SOURCE_IP:new s(a.DER,r.TEXT_VALUED,_,-1,!1,!1,i.EXTENDED_DYNAMIC_STREAMING_STATE),HTTP_REQUEST_STATUS_CODE_1XX:new s(a.CC_UINT32,r.INTEGER_VALUED,54,-1,!1,!1,i.ALL_STATES),HTTP_REQUEST_STATUS_CODE_2XX:new s(a.CC_UINT32,r.INTEGER_VALUED,55,-1,!1,!1,i.ALL_STATES),HTTP_REQUEST_STATUS_CODE_3XX:new s(a.CC_UINT32,r.INTEGER_VALUED,56,-1,!1,!1,i.ALL_STATES),HTTP_REQUEST_STATUS_CODE_4XX:new s(a.CC_UINT32,r.INTEGER_VALUED,57,-1,!1,!1,i.ALL_STATES),HTTP_REQUEST_STATUS_CODE_5XX:new s(a.CC_UINT32,r.INTEGER_VALUED,58,-1,!1,!1,i.ALL_STATES),NR_OF_FRAMES_DECODED:new s(a.CC_UINT32,r.INTEGER_VALUED,59,-1,!1,!1,i.ALL_STATES),NR_OF_FRAMES_REPEATED:new s(a.CC_UINT32,r.INTEGER_VALUED,45,19,!0,!1,i.ALL_STATES),CPU_TEMPERATURE:new s(a.SI,r.REAL_VALUED,28,-1,!1,!1,i.ALL_STATES),PLAYBACK_DELTA_TO_ORIGIN:new s(a.SI,r.INTEGER_VALUED,29,-1,!1,!1,i.ALL_STATES),ORIGIN_TIMESTAMP:new s(a.LAST_UINT32,r.INTEGER_VALUED,1,-1,!1,!1,i.ALL_STATES),PLAYBACK_POSITION:new s(a.LAST_UINT32,r.INTEGER_VALUED,2,-1,!1,!1,i.ALL_STATES),FCC_REQUESTS:new s(a.CC_UINT32,r.INTEGER_VALUED,60,-1,!1,!1,i.ALL_STATES),FCC_ABORTS:new s(a.CC_UINT32,r.INTEGER_VALUED,61,-1,!1,!1,i.ALL_STATES),FCC_PACKET_LOSS:new s(a.CC_UINT32,r.INTEGER_VALUED,62,-1,!1,!1,i.ALL_STATES),RF_BER_PREREEDSOLOMON:new s(a.SI,r.REAL_VALUED,30,-1,!1,!1,i.RF_STATES),RF_BER_PREBCH:new s(a.SI,r.REAL_VALUED,31,-1,!1,!1,i.RF_STATES),RF_BER_POSTBCH:new s(a.SI,r.REAL_VALUED,32,-1,!1,!1,i.RF_STATES),RF_BER_PRELDPC:new s(a.SI,r.REAL_VALUED,33,-1,!1,!1,i.RF_STATES),RF_BER_POSTLDPC:new s(a.SI,r.REAL_VALUED,34,-1,!1,!1,i.RF_STATES),BUFFER_LENGTH:new s(a.SI,r.INTEGER_VALUED,35,-1,!1,!1,i.ALL_STATES),STREAM_DELTA_TO_ORIGIN:new s(a.SI,r.INTEGER_VALUED,36,-1,!1,!1,i.ALL_STATES)},e.InternalDefinitions.MeasurementSpecification.SEGMENT_READ_BITRATE=e.InternalDefinitions.MeasurementSpecification.DS_SEGMENT_READ_BITRATE,e.InternalDefinitions.MeasurementSpecification.SEGMENT_PROFILE_NUMBER=e.InternalDefinitions.MeasurementSpecification.DS_SEGMENT_PROFILE_NR,e.InternalDefinitions.MeasurementSpecification.SEGMENT_PROFILE_BITRATE=e.InternalDefinitions.MeasurementSpecification.DS_SEGMENT_PROFILE_BITRATE,e.InternalDefinitions.MeasurementSpecification.NUMBER_OF_FRAMES_DECODED=e.InternalDefinitions.MeasurementSpecification.NR_OF_FRAMES_DECODED,e.InternalDefinitions.MeasurementSpecification.NUMBER_OF_FRAMES_DROPPED=e.InternalDefinitions.MeasurementSpecification.NR_OF_FRAMES_DROPPED,e.Measurement=t(e.InternalDefinitions.MeasurementSpecification);var o={TEXT:"TEXT",UINT8:"UINT8",UINT16:"UINT16",UINT32:"UINT32",UINT64:"UINT64",BINARY:"BINARY",DOUBLE:"DOUBLE"};e.InternalDefinitions.MetadataType=o,e.InternalDefinitions.InternalEventType={INT_INTEGER:"INT_INTEGER",INT_DOUBLE:"INT_DOUBLE",INT_BINARY:"INT_BINARY",INT_TEXT:"INT_TEXT",INT_JSON:"INT_JSON"},e.InternalDefinitions.ExternalEventType={EXT_TEXT:"EXT_TEXT",EXT_JSON:"EXT_JSON"};var E={};for(var T in e.InternalDefinitions.InternalEventType)E[T]=e.InternalDefinitions.InternalEventType[T];for(var S in e.InternalDefinitions.ExternalEventType)E[S]=e.InternalDefinitions.ExternalEventType[S];function l(e,t,n){if(null==e)throw new Error("The metadataType is null or undefined.");if(null==t)throw new Error("The tagId is null or undefined.");if(null==n)throw new Error("The protocolVersion is null or undefined.");this.type=e,this.tagId=t,this.protocolVersion=n}e.InternalDefinitions.EventType=E,e.InternalDefinitions.maxNrOfEvents=1e3,e.InternalDefinitions.InternalProbeMetadataSpecification={LIBEMPCLIENT_VERSION:new l(o.TEXT,n.libempclient_version_tag,1),LIBEMPCLIENT_BUILDDATE:new l(o.TEXT,n.libempclient_builddate_tag,1),CONFIGURATION_STRING:new l(o.TEXT,n.configuration_string_tag,1),CONFIG_REPORT_INTERVAL:new l(o.UINT16,n.report_interval_tag,1),CONFIG_ID_REPORT_INTERVAL:new l(o.UINT16,n.id_report_interval_tag,1),CONFIG_HOLDOFF:new l(o.UINT8,n.config_holdoff_tag,1),CONFIG_SUBSTATE_HOLDOFF:new l(o.UINT8,n.config_substate_holdoff_tag,1),CONFIG_ERRORED_MS_RESOLUTION:new l(o.UINT16,n.config_errored_ms_resolution_tag,1),CONFIG_FIRST_ERRORED_MS_MASK:new l(o.UINT64,n.config_first_errored_ms_mask_tag,1),CONFIG_SECOND_ERRORED_MS_MASK:new l(o.UINT64,n.config_second_errored_ms_mask_tag,1),CONFIG_THIRD_ERRORED_MS_MASK:new l(o.UINT64,n.config_third_errored_ms_mask_tag,1),SYSTEM_UPTIME:new l(o.UINT32,n.system_uptime_tag,1),SYSTEM_CURRENT_TIME:new l(o.UINT32,n.system_current_time_tag,1),SOFT_STANDBY_DURATION:new l(o.UINT32,n.soft_standby_duration_ms_tag,1),SOFT_STANDBY_START_TIME:new l(o.UINT32,0,0)},e.InternalDefinitions.ExternalProbeMetadataSpecification={STB_MAC:new l(o.TEXT,0,0),STB_IP:new l(o.TEXT,n.device_ip_tag,1),STB_SERIAL_NUMBER:new l(o.TEXT,n.stb_serial_number_tag,1),STB_MANUFACTURER:new l(o.TEXT,n.stb_manufacturer_tag,1),STB_MODEL:new l(o.TEXT,n.stb_model_tag,1),STB_CHIPSET:new l(o.TEXT,n.stb_chipset_tag,1),EMPCLIENT_INTEGRATION_VERSION:new l(o.TEXT,n.empclient_integration_version_tag,1),EMPCLIENT_INTEGRATION_BUILDDATE:new l(o.TEXT,n.empclient_integration_builddate_tag,1),INTEGRATION_SPECIFIC_PROBE_METADATA:new l(o.TEXT,n.integration_specific_probe_metadata_tag,1),PLATFORM_VERSION:new l(o.TEXT,n.platform_version_tag,1),FIRMWARE_VERSION:new l(o.TEXT,n.firmware_version_tag,1),MIDDLEWARE:new l(o.TEXT,n.middleware_tag,1),MIDDLEWARE_VERSION:new l(o.TEXT,n.middleware_version_tag,1),CA_SYSTEM:new l(o.TEXT,n.ca_system_tag,1),EDID_INFORMATION:new l(o.BINARY,n.edid_information_tag,1),CONFIGURATION_SET_FROM:new l(o.TEXT,n.configuration_set_from_tag,1),DISK_SIZE:new l(o.UINT32,n.disk_size_tag,1),WAN_LINK_SPEED:new l(o.UINT32,n.wan_link_speed_tag,1),WLAN_CHANNEL:new l(o.UINT32,n.wlan_channel_tag,1),WLAN_BANDWIDTH:new l(o.UINT32,n.wlan_bandwidth_tag,1),WLAN_CHANNEL_BANDWIDTH:new l(o.UINT32,n.wlan_channel_bandwidth_tag,1),STB_EXTERNAL_ID:new l(o.TEXT,n.stb_external_id_tag,1),LOCATION_DESCRIPTION:new l(o.TEXT,n.location_description_tag,1),SMARTCARD_ID:new l(o.TEXT,n.smartcard_id_tag,1),CA_PAIRING_ID:new l(o.TEXT,n.ca_pairing_id_tag,1),CA_ENTITLEMENT:new l(o.TEXT,n.ca_entitlement_tag,1),PARENTAL_CONTROL_PARAMETERS:new l(o.TEXT,n.parental_control_parameters_tag,1),USER_PIN_CODE:new l(o.TEXT,n.user_pin_code_tag,1),SERVICE_GROUP:new l(o.TEXT,n.service_group_tag,1),USER_ACCOUNT_ID:new l(o.TEXT,n.user_account_id_tag,1),DEVICE_TYPE:new l(o.TEXT,n.device_type_tag,1),DEVICE_ID:new l(o.TEXT,n.device_id_tag,1),SOFT_STANDBY:new l(o.UINT8,0,0),HDD_PARAMETERS:new l(o.BINARY,n.hdd_parameters_tag,19),DEVICE_OS:new l(o.TEXT,n.device_os_tag,19),DEVICE_BROWSER:new l(o.TEXT,n.device_browser_tag,19),APPLICATION:new l(o.TEXT,n.application_tag,19),APPLICATION_VERSION:new l(o.TEXT,n.application_version_tag,19),DEVICE_LATITUDE:new l(o.DOUBLE,n.device_latitude_tag,19),DEVICE_LONGITUDE:new l(o.DOUBLE,n.device_longitude_tag,19),DATA_CONNECTION_TYPE:new l(o.TEXT,n.probe_metadata_connection_type_tag,19)},e.InternalDefinitions.ExternalProbeMetadataSpecification.DEVICE_MANUFACTURER=e.InternalDefinitions.ExternalProbeMetadataSpecification.STB_MANUFACTURER,e.InternalDefinitions.ExternalProbeMetadataSpecification.DEVICE_MODEL=e.InternalDefinitions.ExternalProbeMetadataSpecification.STB_MODEL,e.InternalDefinitions.ExternalProbeMetadataSpecification.DEVICE_IP=e.InternalDefinitions.ExternalProbeMetadataSpecification.STB_IP,e.InternalDefinitions.ExternalProbeMetadataSpecification.DEVICE_OS_VERSION=e.InternalDefinitions.ExternalProbeMetadataSpecification.PLATFORM_VERSION,e.InternalDefinitions.ExternalProbeMetadataSpecification.PLAYER=e.InternalDefinitions.ExternalProbeMetadataSpecification.MIDDLEWARE,e.InternalDefinitions.ExternalProbeMetadataSpecification.PLAYER_VERSION=e.InternalDefinitions.ExternalProbeMetadataSpecification.MIDDLEWARE_VERSION,e.InternalDefinitions.ExternalProbeMetadataSpecification.DEVICE_BROWSER_VERSION=e.InternalDefinitions.ExternalProbeMetadataSpecification.FIRMWARE_VERSION;var I={};for(var d in e.InternalDefinitions.InternalProbeMetadataSpecification)I[d]=e.InternalDefinitions.InternalProbeMetadataSpecification[d];for(var u in e.InternalDefinitions.ExternalProbeMetadataSpecification)I[u]=e.InternalDefinitions.ExternalProbeMetadataSpecification[u];function A(e,t){if(null==e)throw new Error("The eventType is null or undefined.");if(null==t)throw new Error("The eventCode is null or undefined.");this.type=e,this.code=t}function c(e,t,n){if(null==e)throw new Error("The metadataType is null or undefined.");if(null==t)throw new Error("The tagId is null or undefined.");if(null==n)throw new Error("The relevantStates is null or undefined.");this.type=e,this.tagId=t,this.state=n}e.InternalDefinitions.ProbeMetadataSpecification=I,e.InternalProbeMetadata=t(e.InternalDefinitions.InternalProbeMetadataSpecification),e.ProbeMetadata=t(e.InternalDefinitions.ExternalProbeMetadataSpecification),e.DeviceMetadata=t(e.InternalDefinitions.ExternalProbeMetadataSpecification),e.InternalDefinitions.ProbeMetadataEventSpecification={DATA_CONNECTION_TYPE:new A(e.InternalDefinitions.InternalEventType.INT_TEXT,"network/connectionType"),USER_ACCOUNT_ID:new A(e.InternalDefinitions.InternalEventType.INT_TEXT,"metaInformation/userAccountId")},e.InternalDefinitions.StateMetadataEventSpecification={CDN:new A(e.InternalDefinitions.InternalEventType.INT_TEXT,"session/cdn"),CONTENT_TITLE:new A(e.InternalDefinitions.InternalEventType.INT_TEXT,"session/contentTitle"),CONTENT_TYPE:new A(e.InternalDefinitions.InternalEventType.INT_TEXT,"session/contentType"),CONTENT_SERVICE_TITLE:new A(e.InternalDefinitions.InternalEventType.INT_TEXT,"metaInformation/serviceName"),DS_ORIGINATING_SERVER_MANIFEST:new A(e.InternalDefinitions.InternalEventType.INT_JSON,"session/originatingServer"),DS_ORIGINATING_SERVER_SEGMENT:new A(e.InternalDefinitions.InternalEventType.INT_JSON,"session/originatingServer")},e.InternalDefinitions.InternalEventSpecification={API_USAGE_ERROR:new A(e.InternalDefinitions.InternalEventType.INT_JSON,"empclient/apiUsageError"),SESSION_OPEN:new A(e.InternalDefinitions.InternalEventType.INT_JSON,"session/sessionOpen"),SESSION_CLOSE:new A(e.InternalDefinitions.InternalEventType.INT_JSON,"session/sessionClose"),VIEWSTATE_NEW:new A(e.InternalDefinitions.InternalEventType.INT_JSON,"session/viewstate"),VIEWSTATE_STATUS_UPDATE:new A(e.InternalDefinitions.InternalEventType.INT_JSON,"system/generic"),SESSION_ABR_PROFILE_CHANGE:new A(e.InternalDefinitions.InternalEventType.INT_JSON,"session/abrProfileBitrate")},e.InternalDefinitions.InternalStateMetadataSpecification={DS_INITIAL_PROFILE_BITRATE:new c(o.UINT32,n.ds_initial_profile_bitrate_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_FINAL_PROFILE_BITRATE:new c(o.UINT32,n.ds_final_profile_bitrate_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_INITIAL_PROFILE_NR:new c(o.UINT16,n.ds_initial_profile_nr_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_FINAL_PROFILE_NR:new c(o.UINT16,n.ds_final_profile_nr_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_INITIAL_SEGMENT_SOURCE_IP:new c(o.TEXT,n.ds_initial_segment_source_ip_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_FINAL_SEGMENT_SOURCE_IP:new c(o.TEXT,n.ds_final_segment_source_ip_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_INITIAL_MANIFEST_SOURCE_IP:new c(o.TEXT,n.ds_initial_manifest_source_ip_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_FINAL_MANIFEST_SOURCE_IP:new c(o.TEXT,n.ds_final_manifest_source_ip_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE)},e.InternalDefinitions.ExternalStateMetadataSpecification={DE_JITTER_BUFFER_SIZE_IN_KILOBYTE:new c(o.UINT32,n.de_jitter_buffer_size_in_kilobyte_tag,i.QOE_STATES),CHANNEL_CHANGE_TIME:new c(o.UINT16,n.channel_change_time_tag,i.QOE_STATES),IGMP_JOIN_TIME:new c(o.UINT16,n.mcast_igmp_join_time_tag,i.MCAST_STATES),IGMP_LEAVE_TIME:new c(o.UINT16,n.mcast_igmp_leave_time_tag,i.MCAST_STATES),INITIAL_BUFFERING_TIME:new c(o.UINT16,n.initial_buffering_time_tag,i.QOE_STATES),INITIAL_RANDOM_ACCESS_TIME:new c(o.UINT16,n.initial_random_access_time_tag,i.QOE_STATES),RTSP_SETUP_TIME:new c(o.UINT16,n.vod_rtsp_setup_time_tag,i.VOD_STATE),RTSP_TEARDOWN_TIME:new c(o.UINT16,n.vod_rtsp_teardown_time_tag,i.VOD_STATE),TR135_SEVERE_LOSS_MIN_DISTANCE:new c(o.UINT32,n.tr135_severe_loss_min_distance_tag,i.IP_STATES),TUNED_FREQUENCY:new c(o.UINT64,n.tuned_frequency_tag,i.RF_STATES),TUNING_TIME:new c(o.UINT16,n.tuning_time_tag,i.RF_STATES),VOD_SETUP_DELAY:new c(o.UINT16,n.vod_setup_delay_tag,i.VOD_STATE),GENERIC_DESCRIPTION:new c(o.TEXT,n.generic_state_description_tag,i.ALL_STATES),CONTENT_TITLE:new c(o.TEXT,n.content_title_tag,i.ALL_STATES),CONTENT_DESCRIPTION:new c(o.TEXT,n.content_description_tag,i.ALL_STATES),SPECIFIED_DURATION:new c(o.UINT32,n.specified_duration_tag,i.ALL_STATES),DS_NR_OF_SEGMENT_BUFFERS:new c(o.UINT16,n.ds_nr_of_segment_buffers_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_SEGMENT_BUFFER_SIZE:new c(o.UINT32,n.ds_segment_buffer_size_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_PREBUFFERED_SEGMENTS:new c(o.UINT16,n.ds_nr_of_prebuffered_segments_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_SEGMENT_PREBUFFER_SIZE:new c(o.UINT32,n.ds_segment_prebuffer_size_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),NR_OF_REDIRECTS:new c(o.UINT16,n.nr_of_redirects_tag,i.ALL_STATES),DS_ORIGINATING_SOURCE:new c(o.TEXT,n.ds_originating_source_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_ORIGINATING_SERVER_MANIFEST:new c(o.TEXT,n.ds_originating_server_manifest_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_ORIGINATING_SERVER_SEGMENT:new c(o.TEXT,n.ds_originating_server_segment_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_INITIAL_PROFILE:new c(o.TEXT,n.ds_initial_profile_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_NR_OF_CONTENT_PROFILES:new c(o.UINT16,n.ds_nr_of_content_profiles_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_MANIFEST_FILE:new c(o.TEXT,n.ds_manifest_file_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),HLS_INITIAL_PATPMT:new c(o.UINT16,n.hls_initial_patpmt_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_PLAYLIST_TYPE:new c(o.UINT16,n.ds_playlist_type_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DATA_CONNECTION_TYPE:new c(o.TEXT,n.data_connection_type_tag,i.ALL_STATES),IP_NEGOTIATED_BITRATE:new c(o.UINT32,n.ip_negotiated_bitrate_tag,i.ALL_STATES),CONTENT_CA_SYSTEM:new c(o.TEXT,n.content_ca_system_tag,i.ALL_STATES),RF_MODULATION:new c(o.TEXT,n.rf_modulation_tag,i.RF_STATES),RF_SYMBOLRATE:new c(o.UINT64,n.rf_symbolrate_tag,i.RF_STATES),RF_STANDARD:new c(o.TEXT,n.rf_standard_tag,i.RF_STATES),DS_EXIT_BEFORE_INITIAL_PLAY:new c(o.UINT16,n.ds_exit_before_initial_play_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),DS_EXIT_WHILE_STALLED:new c(o.UINT16,n.ds_exit_while_stalled_tag,i.EXTENDED_DYNAMIC_STREAMING_STATE),CONTENT_SERVICE_TITLE:new c(o.TEXT,n.content_service_title_tag,i.ALL_STATES),CONTENT_TYPE:new c(o.TEXT,n.content_type_tag,i.ALL_STATES),CDN:new c(o.TEXT,_,i.ALL_STATES)},e.InternalDefinitions.ExternalStateMetadataSpecification.ASSET_DURATION=e.InternalDefinitions.ExternalStateMetadataSpecification.SPECIFIED_DURATION,e.InternalDefinitions.ExternalStateMetadataSpecification.NUMBER_OF_CONTENT_PROFILES=e.InternalDefinitions.ExternalStateMetadataSpecification.DS_NR_OF_CONTENT_PROFILES,e.InternalDefinitions.ExternalStateMetadataSpecification.MANIFEST_URI=e.InternalDefinitions.ExternalStateMetadataSpecification.DS_ORIGINATING_SERVER_MANIFEST,e.InternalDefinitions.ExternalStateMetadataSpecification.SERVICE_NAME=e.InternalDefinitions.ExternalStateMetadataSpecification.CONTENT_SERVICE_TITLE;var N={};for(var f in e.InternalDefinitions.InternalStateMetadataSpecification)N[f]=e.InternalDefinitions.InternalStateMetadataSpecification[f];for(var R in e.InternalDefinitions.ExternalStateMetadataSpecification)N[R]=e.InternalDefinitions.ExternalStateMetadataSpecification[R];e.InternalDefinitions.StateMetadataSpecification=N,e.InternalStateMetadata=t(e.InternalDefinitions.InternalStateMetadataSpecification),e.StateMetadata=t(e.InternalDefinitions.ExternalStateMetadataSpecification),e.SessionMetadata=t(e.InternalDefinitions.ExternalStateMetadataSpecification),e.InternalDefinitions.MeasurementTypeToTag={CC_UINT16:n.measurement_CC_UINT16_tag,CC_UINT32:n.measurement_CC_UINT32_tag,SI:n.measurement_SI_tag,DER:n.measurement_DER_tag,GAUGE_MIN:n.measurement_GAUGE_MIN_tag,GAUGE_MAX:n.measurement_GAUGE_MAX_tag,LAST_UINT16:n.measurement_LAST_UINT16_tag,LAST_UINT32:n.measurement_LAST_UINT32_tag},e.InternalDefinitions.MaxLengthOfInputString={DEFAULT:65535,URI_ADDRESS:1e3,ERROR_INFO:300,PROBE_METADATA:4096,STATE_METADATA:1e3,ASSET:200,EVENT_CODE:300,EVENT_MESSAGE:300}}(window.Agama),function(D){"use strict";function I(e,t,n){var i=t;return e[i++]=255&n,i-t}var M=D.InternalDefinitions;D.Reporting.addInt8=I;function v(e,t,n){var i=t;return e[i++]=n>>8&255,e[i++]=255&n,i-t}D.Reporting.addInt16=v;function L(e,t,n){var i=t;return e[i++]=n>>24&255,e[i++]=n>>16&255,e[i++]=n>>8&255,e[i++]=255&n,i-t}D.Reporting.addInt32=L;function l(e,t,n){var i=t;return n&=4294967295,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=0,e[i++]=n>>24&255,e[i++]=n>>16&255,e[i++]=n>>8&255,e[i++]=255&n,i-t}D.Reporting.addInt64=l;function d(e,t,n){var i=t,a=unescape(encodeURIComponent(n));i+=v(e,i,a.length);for(var r=0;r<a.length;r++)e[i++]=a.charCodeAt(r);return i-t}D.Reporting.addString=d;function u(e,t,n){var i=t,a=new ArrayBuffer(8),r=new Uint8Array(a);new DataView(a).setFloat64(0,n,!1);for(var s=0;s<r.length;s++)e[i++]=r[s];return i-t}D.Reporting.addFloat=u;function A(e,t,n){var i=t;i+=v(e,i,n.length);for(var a=0;a<n.length;a++)e[i++]=255&n[a];return i-t}D.Reporting.addBinary=A,D.Reporting.addViewStatesBlock=function(e,t,n,i,a){var r=t,s=0,_=0,o=null,E=18<=a,T=null;for(s=0;s<i.length;s++)_=s==i.length-1?n-i[s].startTime:i[s].endTime-i[s].startTime,T=!1,""==i[s].statusCode&&""==i[s].statusMessage||(T=!0),o=T?E?M.ProtocolTags.view_state_extended_ms_tag:M.ProtocolTags.view_state_extended_tag:E?M.ProtocolTags.view_state_ms_tag:M.ProtocolTags.view_state_tag,r+=v(e,r,o),r+=v(e,r,i[s].viewState),r+=E?L(e,r,_):v(e,r,_/1e3),T&&(r+=d(e,r,i[s].statusCode),r+=d(e,r,i[s].statusMessage));return r-t},D.Reporting.closeSession=function(e,t,n,i){var a=t;return 18<=i?(a+=v(e,a,M.ProtocolTags.state_time_ms_tag),a+=L(e,a,n)):(a+=v(e,a,M.ProtocolTags.state_time_tag),a+=v(e,a,n/1e3)),a-t},D.Reporting.addMeasurementBlock=function(e,t,n,i,a,r,s,_){var o=t,E=Math.floor(r/30);i=18<=_?i:i/1e3;try{0<a.length&&(o+=v(e,o,M.MeasurementTypeToTag[n]),o+=v(e,o,a.length));for(var T=0;T<a.length;T++){var S=M.MeasurementSpecification[a[T].id].tagId,l=a[T].value.value;if(o+=v(e,o,S),o+=I(e,o,E),n==M.MeasurementType.CC_UINT16||n==M.MeasurementType.LAST_UINT16)n==M.MeasurementType.CC_UINT16&&(l="lastReportedValue"in l?l.currentValue-l.lastReportedValue:l.currentValue),o+=v(e,o,l),D.log(D.LogLevel.DEBUG,"Measurement: errored_seconds %d %s %d %d",s,a[T].id,l,i);else if(n==M.MeasurementType.CC_UINT32||n==M.MeasurementType.LAST_UINT32)n==M.MeasurementType.CC_UINT32&&(l="lastReportedValue"in l?l.currentValue-l.lastReportedValue:l.currentValue),o+=L(e,o,l),D.log(D.LogLevel.DEBUG,"Measurement: %s %d %d",a[T].id,l,i);else if(n==M.MeasurementType.DER||n==M.MeasurementType.SI)o+=u(e,o,l.avg),o+=u(e,o,l.sumOfSquares),o+=u(e,o,l.min),o+=u(e,o,l.max),o+=v(e,o,l.nrOfUpdates),D.log(D.LogLevel.DEBUG,"Measurement: %s %s %d",a[T].id,JSON.stringify(l),i);else{if(n!=M.MeasurementType.GAUGE_MIN&&n!=M.MeasurementType.GAUGE_MAX)throw new Error("Unknown measurement type: "+n+" for "+a[T].id);o+=u(e,o,l),D.log(D.LogLevel.DEBUG,"Measurement: %s %s %d",a[T].id,JSON.stringify(l),i)}o+=L(e,o,i)}}catch(e){throw D.log(D.LogLevel.ERROR,"Failed to add measurement block: "+e),e}return o-t},D.Reporting.addSessionId=function(e,t,n,i,a){if(a<19)return 0;var r=t;return r+=v(e,r,M.ProtocolTags.session_id_tag),r+=v(e,r,n),(r+=I(e,r,1==i?1:0))-t},D.Reporting.addEventList=function(e,t,n,i,a){if(a<18)return 0;var r,s,_,o,E,T=t;try{for(var S in i)if(r=i[S],o=n,_=(E=r.timestamp)<o?0:E-o,r.type==M.EventType.INT_INTEGER)s=M.ProtocolTags.session_event_int_integer_tag,T+=v(e,T,s),T+=L(e,T,_),T+=d(e,T,r.code),T+=l(e,T,r.value);else if(r.type==M.EventType.INT_DOUBLE)s=M.ProtocolTags.session_event_int_double_tag,T+=v(e,T,s),T+=L(e,T,_),T+=d(e,T,r.code),T+=u(e,T,r.value);else if(r.type==M.EventType.INT_BINARY)s=M.ProtocolTags.session_event_int_binary_tag,T+=v(e,T,s),T+=L(e,T,_),T+=d(e,T,r.code),T+=A(e,T,r.value);else if(r.type==M.EventType.INT_TEXT||r.type==M.EventType.EXT_TEXT)s=M.ProtocolTags.session_event_int_text_tag,r.type==M.EventType.EXT_TEXT&&(s=M.ProtocolTags.session_event_ext_text_tag),T+=v(e,T,s),T+=L(e,T,_),T+=d(e,T,r.code),T+=d(e,T,r.value);else{if(r.type!=M.EventType.INT_JSON&&r.type!=M.EventType.EXT_JSON)throw new Error("Unknown event type: undefined for "+r.code);s=M.ProtocolTags.session_event_int_json_tag,r.type==M.EventType.EXT_JSON&&(s=M.ProtocolTags.session_event_ext_json_tag),T+=v(e,T,s),T+=L(e,T,_),T+=d(e,T,r.code),T+=d(e,T,r.value)}}catch(e){throw new Error("Failed to add events: "+e)}return T-t},D.Reporting.addMetadata=function(e,t,n,i,a){if(0===n)return 0;var r=t;if(r+=v(e,r,n),a==M.MetadataType.UINT32)r+=L(e,r,i);else if(a==M.MetadataType.UINT8)r+=I(e,r,i);else if(a==M.MetadataType.UINT16)r+=v(e,r,i);else if(a==M.MetadataType.UINT64)r+=l(e,r,i);else if(a==M.MetadataType.TEXT)r+=d(e,r,i);else if(a==M.MetadataType.BINARY)r+=A(e,r,i);else if(a==M.MetadataType.DOUBLE)r+=u(e,r,i);else{if("TYPED_ARRAY"!=a)throw new Error("Unknown metadata value type: "+a);for(var s=0;s<8;s++)e[r++]=255&i[s]}return r-t},D.Reporting.addErrorBlock=function(e,t,n){var i=t;0<n.unavailable&&(i+=v(e,i,M.ProtocolTags.service_unavailable_tag),i+=L(e,i,n.unavailable));for(var a=[M.ProtocolTags.first_errored_ms_tag,M.ProtocolTags.second_errored_ms_tag,M.ProtocolTags.third_errored_ms_tag],r=0;r<M.NR_OF_ERROR_METRICS;r++){var s=n.intervals[r],_=n.periods[r];if(0<s)i+=v(e,i,a[r]),i+=v(e,i,s),i+=v(e,i,_),i+=v(e,i,M.ERROR_MS_RESOLUTION)}var o=n.nrOfSupressedDistortions;return 0<o&&(o=255<o?255:o,i+=v(e,i,M.ProtocolTags.nr_of_suppressed_distortions_tag),i+=I(e,i,o)),i-t},D.Reporting.sendReport=function(e,t){var n=new XMLHttpRequest;n.open("POST",t,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var i=encodeURIComponent(window.btoa(String.fromCharCode.apply(null,e)));n.send("report="+i),D.log(D.LogLevel.INFO,"Sent report to: "+t),D.log(D.LogLevel.INTERNAL,"report=%s\n",i)},D.Reporting.createReport=function(e,t,n,i,a,r,s,_,o,E){var T=new ArrayBuffer(16384),S=new Uint8Array(T),l=0,I=0,d=0,u=function(e,t,n,i,a,r){var s=new ArrayBuffer(16384),_=new Uint8Array(s);return _[0]=e,_[1]=t,_[2]=n[0],_[3]=n[1],_[4]=n[2],_[5]=n[3],_[6]=n[4],_[7]=n[5],_[8]=i>>8,_[9]=255&i,_[10]=a,_[11]=r,_[12]=0,_[13]=0,_[14]=0,_[15]=0,new Uint8Array(s,0,16)}(90,t,n,i,a,r);for(I=0;I<u.length;I++)S[l++]=u[I];for(d=0;d<s.length;d++){D.log(D.LogLevel.DEBUG,"Adding session:%s",s[d]);var A=s[d].create(o,t,E);for(I=0;I<A.length;I++)S[l++]=A[I]}for(var c in _){var N=!1;if(!(t<c.protocolVersion)&&(c!==D.InternalProbeMetadata.SOFT_STANDBY_DURATION&&_[c].isSent?(a&M.ReportFlags.id_report)==M.ReportFlags.id_report&&(N=!0):N=!0,N)){var f=M.ProbeMetadataSpecification[c].type;c!==D.InternalProbeMetadata.CONFIG_FIRST_ERRORED_MS_MASK&&c!==D.InternalProbeMetadata.CONFIG_SECOND_ERRORED_MS_MASK&&c!==D.InternalProbeMetadata.CONFIG_THIRD_ERRORED_MS_MASK||(f="TYPED_ARRAY");var R=M.ProbeMetadataSpecification[c].tagId,h=_[c].value;c===D.ProbeMetadata.DEVICE_IP&&t<19&&D.Utils.isValidIpV4(h)&&(R=D.InternalDefinitions.ProtocolTags.stb_ip_tag,h=D.Utils.convertIpv4ToUint32(h),f=D.InternalDefinitions.MetadataType.UINT32),c==D.InternalProbeMetadata.SOFT_STANDBY_DURATION&&t<19&&(R=D.InternalDefinitions.ProtocolTags.soft_standby_duration_tag,h/=1e3,f=D.InternalDefinitions.MetadataType.UINT16);var g=D.Reporting.addMetadata(S,l,R,h,f);D.log(D.LogLevel.DEBUG,"Probe metadata: %s, %s, %d, %d",c,h,l,g),_[c].isSent=!0,l+=g}}l+=v(S,l,M.ProtocolTags.system_current_time_tag);var p=Math.floor(e/1e3);return l+=L(S,l,p),S[12]=S[16],S[13]=S[17],S[14]=S[18],S[15]=S[19],new Uint8Array(T,0,l)}}(window.Agama),function(N){"use strict";var f=N.Reporting,R=N.InternalDefinitions,r=N.Measurement,T=N.Utils;function _(e,t,n){if(null==t)throw new Error("The current time is null or undefined.");e.sessionStartTime=t,e.startTime=t,e.endTime=e.startTime,e.measurementList={},e.stateMetadata={},e.eventList=[],e.isNewSession=!0,e.id=n+1,e.error={unavailable:0,isActive:[!1,!1,!1],intervals:[0,0,0],periods:[0,0,0],nrOfSupressedDistortions:0}}function a(e,t,n,i,a){if(e.eventList.length>=N.InternalDefinitions.maxNrOfEvents)N.log(N.LogLevel.WARNING,"Event queue full. Dropping event %s, %s",i,a);else{var r=a,s=i,_=!1;"string"!=typeof s&&(s=s.toString()),n===R.EventType.INT_TEXT||n===R.EventType.EXT_TEXT?"string"!=typeof r&&(r=r.toString()):n!=R.EventType.INT_INTEGER||T.isValidIntegerNumber(r)||(r=Math.floor(r));for(var o={timestamp:t,type:n,code:s,value:r},E=e.eventList.length-1;0<=E&&!(t>e.eventList[E].timestamp+900);E--)if(e.eventList[E].type in N.InternalDefinitions.ExternalEventType&&e.eventList[E].type===o.type&&e.eventList[E].code===o.code){e.eventList[E]=o,_=!0;break}_||e.eventList.push(o)}}function n(e,t){for(var n in e.startTime=t,e.endTime=e.startTime,e.isNewSession=!1,e.eventList=[],e.error={unavailable:0,isActive:[!1,!1,!1],intervals:[0,0,0],periods:[0,0,0],nrOfSupressedDistortions:0},e.measurementList){var i=R.MeasurementSpecification[n].type;N.log(N.LogLevel.INTERNAL,"Rebase for new report: %s, %d",n,e.measurementList[n].value),i==R.MeasurementType.CC_UINT16||i==R.MeasurementType.CC_UINT32?(e.measurementList[n].value.lastReportedValue=e.measurementList[n].value.currentValue,e.measurementList[n].value.lastErroredSeconds=0,e.measurementList[n].value.erroredSeconds=0):i==R.MeasurementType.LAST_UINT16||i==R.MeasurementType.LAST_UINT32?delete e.measurementList[n]:i==R.MeasurementType.GAUGE_MAX||i==R.MeasurementType.GAUGE_MIN?e.measurementList[n].value=0:e.measurementList[n].value.nrOfUpdates=0}}function h(e){var t={};for(var n in Object.keys(R.MeasurementType).forEach(function(e){t[e]=[]}),e.measurementList){var i=R.MeasurementSpecification[n].type;if(i==R.MeasurementType.CC_UINT16||i==R.MeasurementType.CC_UINT32){if(e.measurementList[n].value.currentValue-e.measurementList[n].value.lastReportedValue<=0){N.log(N.LogLevel.DEBUG,"Discard unchanged measurement: %s",n);continue}}else if((i==R.MeasurementType.SI||i==R.MeasurementType.DER||i==R.MeasurementType.GAUGE_MIN||i==R.MeasurementType.GAUGE_MAX)&&e.measurementList[n].value.nrOfUpdates<=0){N.log(N.LogLevel.DEBUG,"Discard unchanged measurement: %s",n);continue}t[i].push({id:n,value:e.measurementList[n]})}return t}function e(e,t,n,i,a,r,s){if(null==e)throw new Error("The current time is null or undefined.");_(this,e,t),this.state=R.State.EXTENDED_DYNAMIC_STREAMING_STATE,this.tag=R.ProtocolTags.extended_dynamic_streaming_state_tag,this.initialViewState=s,this.protocol=i,this.uri=n,this.asset=a,this.playlistType=r,this.assetCompletionRatio=0,this.viewStates=[{viewState:s,statusCode:"",statusMessage:"",startTime:this.startTime}],this.internalStateMetadata={},this.sessionEnded=!1,this.disableAutoBitrateChange=!1,this.hadInitialPlay=!1,this.updateHadInitialPlay(s)}function t(e,t,n,i,a){if(null==e)throw new Error("The current time is null or undefined.");if(_(this,e,t),this.isTimeshift=i,this.initialViewState=a,i){if(n.system===N.DtvDeliverySystem.DVB_C)this.tag=R.ProtocolTags.dvb_c_timeshift_state_tag,this.state=R.State.DVB_C_TIMESHIFT_STATE;else if(n.system===N.DtvDeliverySystem.DVB_S)this.tag=R.ProtocolTags.dvb_s_timeshift_state_tag,this.state=R.State.DVB_S_TIMESHIFT_STATE;else{if(n.system!==N.DtvDeliverySystem.DVB_T)throw new Error("Unknown dtvIdentification.system : "+n.system);this.tag=R.ProtocolTags.dvb_t_timeshift_state_tag,this.state=R.State.DVB_T_TIMESHIFT_STATE}this.viewStates=[{viewState:a,statusCode:"",statusMessage:"",startTime:this.startTime}]}else{if(n.system===N.DtvDeliverySystem.DVB_C)this.tag=R.ProtocolTags.dvb_c_state_tag,this.state=R.State.DVB_C_STATE;else if(n.system===N.DtvDeliverySystem.DVB_S)this.tag=R.ProtocolTags.dvb_s_state_tag,this.state=R.State.DVB_S_STATE;else{if(n.system!==N.DtvDeliverySystem.DVB_T)throw new Error("Unknown dtvIdentification.system : "+n.system);this.tag=R.ProtocolTags.dvb_t_state_tag,this.state=R.State.DVB_T_STATE}this.viewStates=[]}this.onid=n.channel.onid,this.tsid=n.channel.tsid,this.sid=n.channel.sid}function i(e,t,n,i,a){if(null==e)throw new Error("The current time is null or undefined.");_(this,e,t),this.isTimeshift=i,this.initialViewState=a,i?(this.tag=R.ProtocolTags.timeshift_ipv4_ipv6_state_tag,this.viewStates=[{viewState:a,statusCode:"",statusMessage:"",startTime:this.startTime}],this.state=R.State.MCAST_TIMESHIFT_STATE):(this.tag=R.ProtocolTags.mcast_ipv4_ipv6_state_tag,this.viewStates=[],this.state=R.State.MCAST_STATE),this.ip=n.channel.ip,this.port=n.channel.port}function s(e,t,n,i){if(null==e)throw new Error("The current time is null or undefined.");_(this,e,t),this.state=R.State.VOD_STATE,this.uri=n.uri,this.protocol=n.protocol,this.sourceServer="","sourceServer"in n&&(this.sourceServer=N.Utils.truncateStateMetadataInputString(n.sourceServer)),this.initialViewState=i,this.tag=R.ProtocolTags.vod_state_tag,this.viewStates=[{viewState:i,statusCode:"",statusMessage:"",startTime:this.startTime}]}function o(e,t,n,i){if(null==e)throw new Error("The current time is null or undefined.");_(this,e,t),this.state=R.State.PVR_STATE,this.uri=n.uri,this.initialViewState=i,this.tag=R.ProtocolTags.pvr_state_tag,this.viewStates=[{viewState:i,statusCode:"",statusMessage:"",startTime:this.startTime}],this.sessionEnded=!1}function E(e,t){if(null==e)throw new Error("The current time is null or undefined.");_(this,e,t),this.state=R.State.UNDEFINED_ACTIVE_STATE,this.tag=R.ProtocolTags.undefined_active_state_tag}function S(e,t){if(null==e)throw new Error("The current time is null or undefined.");_(this,e,t),this.state=R.State.IDLE_STATE,this.tag=R.ProtocolTags.idle_state_tag}function l(e,t,n){if(null==e)throw new Error("The current time is null or undefined.");_(this,e,t),this.errorStr=n,this.state=R.State.FAILED_STATE,this.tag=R.ProtocolTags.failed_state_tag,this.stateMetadata={}}e.prototype.getType=function(){return"abr"},e.prototype.updateHadInitialPlay=function(e){e===N.ViewState.PLAYING&&(this.hadInitialPlay=!0)},e.prototype.updateCompletionRatio=function(){if(N.StateMetadata.SPECIFIED_DURATION in this.stateMetadata&&N.Measurement.PLAYBACK_POSITION in this.measurementList){var e=this.stateMetadata[N.StateMetadata.SPECIFIED_DURATION].value,t=this.measurementList[N.Measurement.PLAYBACK_POSITION].value;0<e&&(this.assetCompletionRatio=t/(1e3*e),this.assetCompletionRatio=1<this.assetCompletionRatio?1:this.assetCompletionRatio,this.assetCompletionRatio=Math.round(100*this.assetCompletionRatio)/100)}},e.prototype.reset=function(e){this.updateCompletionRatio(),n(this,e);var t=this.viewStates.pop();this.viewStates=[{viewState:t.viewState,statusCode:t.statusCode,statusMessage:t.statusMessage,startTime:this.startTime}]},e.prototype.addEvent=function(e,t,n,i){a(this,e,t,n,i)},e.prototype.addInitialAndFinalStateMetadata=function(e,t,n){e in this.internalStateMetadata||(this.internalStateMetadata[e]={value:n,isSent:!1}),t in this.internalStateMetadata||(this.internalStateMetadata[t]={value:n,isSent:!1}),this.internalStateMetadata[t].value=n},e.prototype.updateMeasureDsNrOfContentBitrateChanges=function(e,t){var n=0;if(r.DS_SEGMENT_PROFILE_BITRATE in this.measurementList){if(t===(n=this.measurementList[r.DS_SEGMENT_PROFILE_BITRATE].value.currentValue))return;var i,a;if(n<t)i=r.DS_NR_OF_CONTENT_PROFILE_BITRATE_UP_CHANGES in this.measurementList?(a=this.measurementList[r.DS_NR_OF_CONTENT_PROFILE_BITRATE_UP_CHANGES],T.updateCC(e,a,a.value.currentValue+1)):T.updateCC(e,null,1),this.measurementList[r.DS_NR_OF_CONTENT_PROFILE_BITRATE_UP_CHANGES]={value:i};else i=r.DS_NR_OF_CONTENT_PROFILE_BITRATE_DOWN_CHANGES in this.measurementList?(a=this.measurementList[r.DS_NR_OF_CONTENT_PROFILE_BITRATE_DOWN_CHANGES],T.updateCC(e,a,a.value.currentValue+1)):T.updateCC(e,null,1),this.measurementList[r.DS_NR_OF_CONTENT_PROFILE_BITRATE_DOWN_CHANGES]={value:i}}t!=n&&this.addEvent(e,R.InternalEventSpecification.SESSION_ABR_PROFILE_CHANGE.type,R.InternalEventSpecification.SESSION_ABR_PROFILE_CHANGE.code,JSON.stringify({from:n,to:t}))},e.prototype.create=function(t,n,i){var e=new ArrayBuffer(16384),a=new Uint8Array(e),r=0,s=this.endTime-this.startTime;r+=f.addSessionId(a,r,this.id,this.isNewSession,n),r+=f.addInt16(a,r,this.tag),r+=f.addString(a,r,this.uri),r+=f.addInt8(a,r,this.protocol),r+=f.addString(a,r,this.asset),r+=f.addInt8(a,r,this.playlistType),r+=f.addViewStatesBlock(a,r,this.endTime,this.viewStates,n),r+=f.addErrorBlock(a,r,this.error);var _=h(this);for(var o in Object.keys(R.MeasurementType).forEach(function(e){r+=f.addMeasurementBlock(a,r,e,s,_[e],t,i,n)}),this.stateMetadata)if(!this.stateMetadata[o].isSent){var E=R.StateMetadataSpecification[o].tagId,T=R.StateMetadataSpecification[o].type,S=this.stateMetadata[o].value,l=f.addMetadata(a,r,E,S,T);N.log(N.LogLevel.DEBUG,"State metadata: %s, %s, %d, %d",o,S,r,l),r+=l,this.stateMetadata[o].isSent=!0}for(var I in this.internalStateMetadata)if(!this.internalStateMetadata[I].isSent&&(this.sessionEnded||-1==I.indexOf("_FINAL_"))){var d=R.StateMetadataSpecification[I].tagId,u=R.StateMetadataSpecification[I].type,A=this.internalStateMetadata[I].value,c=f.addMetadata(a,r,d,A,u);N.log(N.LogLevel.DEBUG,"State metadata: %s, %s, %d, %d",I,A,r,c),r+=c,this.internalStateMetadata[I].isSent=!0}return r+=f.addEventList(a,r,this.startTime,this.eventList,n),r+=f.closeSession(a,r,s,n),new Uint8Array(e,0,r)},t.prototype.reset=function(e){if(n(this,e),this.isTimeshift){var t=this.viewStates.pop();this.viewStates=[{viewState:t.viewState,statusCode:t.statusCode,statusMessage:t.statusMessage,startTime:this.startTime}]}else this.viewStates=[]},t.prototype.addEvent=function(e,t,n,i){a(this,e,t,n,i)},t.prototype.create=function(t,n,i){var e=new ArrayBuffer(16384),a=new Uint8Array(e),r=0,s=this.endTime-this.startTime;r+=f.addSessionId(a,r,this.id,this.isNewSession,n),r+=f.addInt16(a,r,this.tag),r+=f.addInt16(a,r,this.onid),r+=f.addInt16(a,r,this.tsid),r+=f.addInt16(a,r,this.sid),this.isTimeshift&&(r+=f.addViewStatesBlock(a,r,this.endTime,this.viewStates,n)),r+=f.addErrorBlock(a,r,this.error);var _=h(this);for(var o in Object.keys(R.MeasurementType).forEach(function(e){r+=f.addMeasurementBlock(a,r,e,s,_[e],t,i,n)}),this.stateMetadata)if(!this.stateMetadata[o].isSent){var E=R.StateMetadataSpecification[o].tagId,T=R.StateMetadataSpecification[o].type,S=this.stateMetadata[o].value,l=f.addMetadata(a,r,E,S,T);N.log(N.LogLevel.DEBUG,"State metadata: %s, %s, %d, %d",o,S,r,l),r+=l,this.stateMetadata[o].isSent=!0}return r+=f.addEventList(a,r,this.startTime,this.eventList,n),r+=f.closeSession(a,r,s,n),new Uint8Array(e,0,r)},i.prototype.reset=function(e){if(n(this,e),this.isTimeshift){var t=this.viewStates.pop();this.viewStates=[{viewState:t.viewState,statusCode:t.statusCode,statusMessage:t.statusMessage,startTime:this.startTime}]}else this.viewStates=[]},i.prototype.addEvent=function(e,t,n,i){a(this,e,t,n,i)},i.prototype.create=function(t,n,i){var e=new ArrayBuffer(16384),a=new Uint8Array(e),r=0,s=this.endTime-this.startTime;if(r+=f.addSessionId(a,r,this.id,this.isNewSession,n),this.tag=19<=n?this.isTimeshift?R.ProtocolTags.timeshift_ipv4_ipv6_state_tag:R.ProtocolTags.mcast_ipv4_ipv6_state_tag:this.isTimeshift?R.ProtocolTags.timeshift_state_tag:R.ProtocolTags.mcast_state_tag,r+=f.addInt16(a,r,this.tag),19<=n)r+=f.addInt16(a,r,this.port),r+=f.addString(a,r,this.ip);else{var _=N.Utils.convertIpv4ToUint32(this.ip);r+=f.addInt32(a,r,_),r+=f.addInt16(a,r,this.port)}this.isNewSession&&(r+=f.addInt16(a,r,R.ProtocolTags.mcast_join_tag)),this.isTimeshift&&(r+=f.addViewStatesBlock(a,r,this.endTime,this.viewStates,n)),r+=f.addErrorBlock(a,r,this.error);var o=h(this);for(var E in Object.keys(R.MeasurementType).forEach(function(e){r+=f.addMeasurementBlock(a,r,e,s,o[e],t,i,n)}),this.stateMetadata)if(!this.stateMetadata[E].isSent){var T=R.StateMetadataSpecification[E].tagId,S=R.StateMetadataSpecification[E].type,l=this.stateMetadata[E].value,I=f.addMetadata(a,r,T,l,S);N.log(N.LogLevel.DEBUG,"State metadata: %s, %s, %d, %d",E,l,r,I),r+=I,this.stateMetadata[E].isSent=!0}return r+=f.addEventList(a,r,this.startTime,this.eventList,n),r+=f.closeSession(a,r,s,n),new Uint8Array(e,0,r)},s.prototype.reset=function(e){n(this,e);var t=this.viewStates.pop();this.viewStates=[{viewState:t.viewState,statusCode:t.statusCode,statusMessage:t.statusMessage,startTime:this.startTime}]},s.prototype.addEvent=function(e,t,n,i){a(this,e,t,n,i)},s.prototype.create=function(t,n,i){var e=new ArrayBuffer(16384),a=new Uint8Array(e),r=0,s=this.endTime-this.startTime;r+=f.addSessionId(a,r,this.id,this.isNewSession,n),r+=f.addInt16(a,r,this.tag),r+=f.addInt16(a,r,R.ProtocolTags.vod_parameters_tag),r+=f.addString(a,r,this.uri),r+=f.addInt8(a,r,this.protocol),r+=f.addString(a,r,this.sourceServer),r+=f.addViewStatesBlock(a,r,this.endTime,this.viewStates,n),r+=f.addErrorBlock(a,r,this.error);var _=h(this);for(var o in Object.keys(R.MeasurementType).forEach(function(e){r+=f.addMeasurementBlock(a,r,e,s,_[e],t,i,n)}),this.stateMetadata)if(!this.stateMetadata[o].isSent){var E=R.StateMetadataSpecification[o].tagId,T=R.StateMetadataSpecification[o].type,S=this.stateMetadata[o].value,l=f.addMetadata(a,r,E,S,T);N.log(N.LogLevel.DEBUG,"State metadata: %s, %s, %d, %d",o,S,r,l),r+=l,this.stateMetadata[o].isSent=!0}return r+=f.addEventList(a,r,this.startTime,this.eventList,n),r+=f.closeSession(a,r,s,n),new Uint8Array(e,0,r)},o.prototype.reset=function(e){n(this,e);var t=this.viewStates.pop();this.viewStates=[{viewState:t.viewState,statusCode:t.statusCode,statusMessage:t.statusMessage,startTime:this.startTime}]},o.prototype.addEvent=function(e,t,n,i){a(this,e,t,n,i)},o.prototype.create=function(t,n,i){var e=new ArrayBuffer(16384),a=new Uint8Array(e),r=0,s=this.endTime-this.startTime;r+=f.addSessionId(a,r,this.id,this.isNewSession,n),r+=f.addInt16(a,r,this.tag),r+=f.addString(a,r,this.uri),r+=f.addViewStatesBlock(a,r,this.endTime,this.viewStates,n),r+=f.addErrorBlock(a,r,this.error);var _=h(this);for(var o in Object.keys(R.MeasurementType).forEach(function(e){r+=f.addMeasurementBlock(a,r,e,s,_[e],t,i,n)}),this.stateMetadata)if(!this.stateMetadata[o].isSent){var E=R.StateMetadataSpecification[o].tagId,T=R.StateMetadataSpecification[o].type,S=this.stateMetadata[o].value,l=f.addMetadata(a,r,E,S,T);N.log(N.LogLevel.DEBUG,"State metadata: %s, %s, %d, %d",o,S,r,l),r+=l,this.stateMetadata[o].isSent=!0}return r+=f.addEventList(a,r,this.startTime,this.eventList,n),r+=f.closeSession(a,r,s,n),new Uint8Array(e,0,r)},E.prototype.reset=function(e){n(this,e)},E.prototype.addEvent=function(e,t,n,i){a(this,e,t,n,i)},E.prototype.create=function(t,n,i){var e=new ArrayBuffer(16384),a=new Uint8Array(e),r=0,s=this.endTime-this.startTime;r+=f.addSessionId(a,r,this.id,this.isNewSession,n),r+=f.addInt16(a,r,this.tag);var _=h(this);for(var o in Object.keys(R.MeasurementType).forEach(function(e){r+=f.addMeasurementBlock(a,r,e,s,_[e],t,i,n)}),this.stateMetadata)if(!this.stateMetadata[o].isSent){var E=R.StateMetadataSpecification[o].tagId,T=R.StateMetadataSpecification[o].type,S=this.stateMetadata[o].value,l=f.addMetadata(a,r,E,S,T);N.log(N.LogLevel.DEBUG,"State metadata: %s, %s, %d, %d",o,S,r,l),r+=l,this.stateMetadata[o].isSent=!0}return r+=f.addEventList(a,r,this.startTime,this.eventList,n),r+=f.closeSession(a,r,s,n),new Uint8Array(e,0,r)},S.prototype.reset=function(e){n(this,e)},S.prototype.addEvent=function(e,t,n,i){a(this,e,t,n,i)},S.prototype.create=function(t,n,i){var e=new ArrayBuffer(16384),a=new Uint8Array(e),r=0,s=this.endTime-this.startTime;r+=f.addSessionId(a,r,this.id,this.isNewSession,n),r+=f.addInt16(a,r,this.tag);var _=h(this);for(var o in Object.keys(R.MeasurementType).forEach(function(e){r+=f.addMeasurementBlock(a,r,e,s,_[e],t,i,n)}),this.stateMetadata)if(!this.stateMetadata[o].isSent){var E=R.StateMetadataSpecification[o].tagId,T=R.StateMetadataSpecification[o].type,S=this.stateMetadata[o].value,l=f.addMetadata(a,r,E,S,T);N.log(N.LogLevel.DEBUG,"State metadata: %s, %s, %d, %d",o,S,r,l),r+=l,this.stateMetadata[o].isSent=!0}return r+=f.addEventList(a,r,this.startTime,this.eventList,n),r+=f.closeSession(a,r,s,n),new Uint8Array(e,0,r)},l.prototype.reset=function(e){n(this,e)},l.prototype.addEvent=function(e,t,n,i){a(this,e,t,n,i)},l.prototype.create=function(t,n,i){var e=new ArrayBuffer(16384),a=new Uint8Array(e),r=0,s=this.endTime-this.startTime;r+=f.addSessionId(a,r,this.id,this.isNewSession,n),r+=f.addInt16(a,r,this.tag),r+=f.addString(a,r,this.errorStr);var _=h(this);for(var o in Object.keys(R.MeasurementType).forEach(function(e){r+=f.addMeasurementBlock(a,r,e,s,_[e],t,i,n)}),this.stateMetadata)if(!this.stateMetadata[o].isSent){var E=R.StateMetadataSpecification[o].tagId,T=R.StateMetadataSpecification[o].type,S=this.stateMetadata[o].value,l=f.addMetadata(a,r,E,S,T);N.log(N.LogLevel.DEBUG,"State metadata: %s, %s, %d, %d",o,S,r,l),r+=l,this.stateMetadata[o].isSent=!0}return r+=f.addEventList(a,r,this.startTime,this.eventList,n),r+=f.closeSession(a,r,s,n),new Uint8Array(e,0,r)},N.Sessions.IdleSession=S,N.Sessions.UndefinedActiveSession=E,N.Sessions.DsSession=e,N.Sessions.DtvRfSession=t,N.Sessions.DtvMcastSession=i,N.Sessions.VodSession=s,N.Sessions.PvrSession=o,N.Sessions.FailedSession=l}(window.Agama),function(d){"use strict";var i=d.Reporting,u=d.InternalDefinitions,E=d.Sessions,A=d.Utils,a=D_EMP_CLIENT_VERSION,r=D_EMP_CLIENT_BUILD_DATE,s=3;function e(e,t){if(null==e)throw new Error("The current time is null or undefined.");if(null==t)throw new Error("The config string is null or undefined.");this.shutdownType=0,this.probeMetadata={},this.sessions=[new E.IdleSession(e,-1)],this.currentSession=this.sessions[0],this.available=!0,this.unavailableStart=null,this.lastErrorMsCheck=null,this.config=function(){var e={emp_service:null,report_interval:null,id_report_interval:4800,operator_id:null};e.err_ms_mask1=new Uint8Array(new ArrayBuffer(8)),e.err_ms_mask2=new Uint8Array(new ArrayBuffer(8)),e.err_ms_mask3=new Uint8Array(new ArrayBuffer(8)),e.substate_holdoff=1,e.holdoff=1;for(var t=e.errored_seconds=0;t<e.err_ms_mask1.length;t++)e.err_ms_mask1[t]=255;return e.err_ms_mask2[6]=8,e.err_ms_mask3[6]=16,e.protocol=u.EMP_PROTOCOL_VERSION,e}(),this.setExternalConfig(e,t),this.sequenceNumber=0,this._lastReportSentTime=null,this._forceIdReport=!1;var n=function(e){if(s<e){var t=e-s;return 1e3*(s+Math.floor(Math.random()*t))}return 1e3*s}(this.config.report_interval);this._initialReportSendTime=e+n,this._maxExtendReportIntervalTimeMs=3e3,this._setInternalProbeMetadata(d.InternalProbeMetadata.LIBEMPCLIENT_VERSION,a),this._setInternalProbeMetadata(d.InternalProbeMetadata.LIBEMPCLIENT_BUILDDATE,r),this._setInternalProbeMetadata(d.InternalProbeMetadata.CONFIGURATION_STRING,t),this._setInternalProbeMetadata(d.InternalProbeMetadata.CONFIG_FIRST_ERRORED_MS_MASK,this.config.err_ms_mask1),this._setInternalProbeMetadata(d.InternalProbeMetadata.CONFIG_SECOND_ERRORED_MS_MASK,this.config.err_ms_mask2),this._setInternalProbeMetadata(d.InternalProbeMetadata.CONFIG_THIRD_ERRORED_MS_MASK,this.config.err_ms_mask3),d.log(d.LogLevel.DEBUG,"Initialized EMP client core. Should send initial report in: %s ms",this._initialReportSendTime-e)}e.prototype.hasMacAddress=function(){return d.ProbeMetadata.STB_MAC in this.probeMetadata},e.prototype.createReport=function(e){if(null==e)throw new Error("The current time is null or undefined.");if(!(d.ProbeMetadata.STB_MAC in this.probeMetadata))throw new Error("Cannot create report. Probe metadata STB_MAC is not set.");0==this.shutdownType?this._closeCurrentSession(e,!1):this._closeCurrentSession(e,!0);var t=0;null===this._lastReportSentTime&&(t|=u.ReportFlags.first_report),this._shouldSendIdReport()&&(t|=u.ReportFlags.id_report),this._softStandbyReset(e);var n=i.createReport(e,this.config.protocol,A.strToMAC(this.probeMetadata[d.ProbeMetadata.STB_MAC].value),this.sequenceNumber,t,this.shutdownType,this.sessions,this.probeMetadata,this.config.report_interval,this.config.errored_seconds);return delete this.probeMetadata[d.InternalProbeMetadata.SOFT_STANDBY_DURATION],this.sequenceNumber++,this.sessions=[this.sessions.pop()],this.sessions[0].reset(e),this._lastReportSentTime=e,{emp_service:this.config.emp_service,data:n}},e.prototype.shouldSendReport=function(e){if(null==e)throw new Error("The current time is null or undefined.");var t=this.getNextReportTime(),n=t-e;return d.log(d.LogLevel.INTERNAL,"Next report should be sent in: %d ms",n),t<=e&&(!(this.currentSession.state&u.State.EXTENDED_DYNAMIC_STREAMING_STATE&&!("DS_ORIGINATING_SERVER_MANIFEST"in this.currentSession.stateMetadata)&&Math.abs(n)<=this._maxExtendReportIntervalTimeMs)||(d.log(d.LogLevel.INTERNAL,"Extending report interval: %s ms",Math.abs(n)),!1))},e.prototype.getNextReportTime=function(){return null===this._lastReportSentTime?this._initialReportSendTime:this._lastReportSentTime+1e3*this.config.report_interval},e.prototype._shouldSendIdReport=function(){var e=Math.ceil(this.config.id_report_interval/this.config.report_interval);return!0===this._forceIdReport?!(this._forceIdReport=!1):null===this._lastReportSentTime||(1==this.sequenceNumber||this.sequenceNumber%e==0)},e.prototype._softStandbyUpdateValue=function(e,t){var n=d.InternalProbeMetadata.SOFT_STANDBY_DURATION,i=d.InternalProbeMetadata.SOFT_STANDBY_START_TIME;if(i in this.probeMetadata){if(0===e){var a=t-this.probeMetadata[i].value;a=Math.round(a),n in this.probeMetadata&&(a+=this.probeMetadata[n].value),delete this.probeMetadata[i],this.probeMetadata[n]={value:a,isSent:!1}}}else 0!==e&&(this.probeMetadata[i]={value:t,isSent:!1})},e.prototype._shouldTriggerIdReport=function(e,t){if(e==d.ProbeMetadata.DATA_CONNECTION_TYPE){if(!(e in this.probeMetadata&&this.probeMetadata[e].value===t))return!0}else if(e==d.InternalProbeMetadata.CONFIGURATION_STRING&&!(e in this.probeMetadata&&this.probeMetadata[e].value===t))return!0},e.prototype._softStandbyReset=function(e){var t=d.InternalProbeMetadata.SOFT_STANDBY_DURATION,n=d.InternalProbeMetadata.SOFT_STANDBY_START_TIME;if(n in this.probeMetadata){var i=e-this.probeMetadata[n].value;i=Math.round(i),t in this.probeMetadata&&(i+=this.probeMetadata[t].value),this.probeMetadata[t]={value:i,isSent:!1},this.probeMetadata[n]={value:e,isSent:!1}}},e.prototype.getVersionInformation=function(){var e="";return e+="VER:"+a,e+="-DATE:"+r,e+="-PROTOCOL_VER:"+u.EMP_PROTOCOL_VERSION},e.prototype.setExternalConfig=function(t,n){try{A.validateExternalConfig(n)}catch(e){var i=JSON.stringify({value:n,event:"setConfigString"});return this._triggerApiUsageError(t,this.currentSession,i),void d.log(d.LogLevel.ERROR,i)}n=A.truncateDefaultInputString(n);var e=d.Utils.parseExternalConfig(n),a={};for(var r in this.config)a[r]=this.config[r];for(var s in e)a[s]=e[s];for(var _ in d.Utils.EXTERNAL_CONFIG_KEYS)if(null===a[_]||void 0===a[_])throw new Error("Configuration parameter '"+_+"' is not set.");var o=parseInt(a.report_interval,10);if(isNaN(o))throw new Error("The value for parameter report_interval is invalid.");a.report_interval=o;var E=parseInt(a.id_report_interval,10);if(isNaN(E))throw new Error("The value for parameter id_report_interval is invalid.");a.id_report_interval=E;var T=parseInt(a.holdoff,10);if(isNaN(T))throw new Error("The value for parameter holdoff is invalid.");a.holdoff=T;var S=parseInt(a.substate_holdoff,10);if(isNaN(S))throw new Error("The value for parameter substate_holdoff is invalid.");a.substate_holdoff=S;var l=parseInt(a.errored_seconds,10);if(1!==l&&0!==l)throw new Error("The value for parameter errored_seconds is invalid.");a.errored_seconds=l;var I=parseInt(a.protocol,10);if(isNaN(I)||I<16||I>u.EMP_PROTOCOL_VERSION)throw new Error("The value for parameter protocol is invalid.");a.protocol=I,this.config=a,this._setInternalProbeMetadata(d.InternalProbeMetadata.CONFIGURATION_STRING,n),this._setInternalProbeMetadata(d.InternalProbeMetadata.CONFIG_FIRST_ERRORED_MS_MASK,this.config.err_ms_mask1),this._setInternalProbeMetadata(d.InternalProbeMetadata.CONFIG_SECOND_ERRORED_MS_MASK,this.config.err_ms_mask2),this._setInternalProbeMetadata(d.InternalProbeMetadata.CONFIG_THIRD_ERRORED_MS_MASK,this.config.err_ms_mask3),d.log(d.LogLevel.INTERNAL,this.config)},e.prototype.setProbeMetadata=function(t,n,i){try{A.validateProbeMetadata(n,i)}catch(e){var a=JSON.stringify({value:i,deviceMetadata:n});return this._triggerApiUsageError(t,this.currentSession,a),void d.log(d.LogLevel.ERROR,a)}if("string"==typeof i&&(i=A.truncateProbeMetadataInputString(i)),(n=A.getProbeMetadataId(n))!==d.ProbeMetadata.STB_IP||A.isValidIp(i)){if(n in u.ProbeMetadataEventSpecification&&this.currentSession.addEvent(t,u.ProbeMetadataEventSpecification[n].type,u.ProbeMetadataEventSpecification[n].code,i),n===d.ProbeMetadata.DEVICE_ID){if(!A.isValidUuid(i))return void d.log(d.LogLevel.ERROR,"Invalid ProbeMetadata.DEVICE_ID value '"+i+"'. Ignoring value.");if(d.ProbeMetadata.STB_MAC in this.probeMetadata)d.log(d.LogLevel.WARNING,"ProbeMetadata.STB_MAC is already set. Will not generate it from ProbeMetadata.DEVICE_ID.");else{var e=A.convertDeviceIdToMac(i);this.setProbeMetadata(t,d.ProbeMetadata.STB_MAC,e)}}n===d.ProbeMetadata.SOFT_STANDBY&&this._softStandbyUpdateValue(i,t),1==this._shouldTriggerIdReport(n,i)&&(this._forceIdReport=!0),this.probeMetadata[n]={value:i,isSent:!1}}else d.log(d.LogLevel.ERROR,"Invalid ProbeMetadata.STB_IP value '"+i+"'. Ignoring value.")},e.prototype._setInternalProbeMetadata=function(e,t){if(!(e in d.InternalProbeMetadata))throw new Error("Unknown internal probe metadata '"+e+"'.");if(null==t)throw new Error("ProbeMetadata '"+e+"' value is null or undefined.");1==this._shouldTriggerIdReport(e,t)&&(this._forceIdReport=!0),this.probeMetadata[e]={value:t,isSent:!1}},e.prototype.shutdown=function(e){if(null==e)throw new Error("The shutdown type is null or undefined.");this.shutdownType=e},e.prototype.setMeasurement=function(t,n,i){try{A.validateMeasurement(n,i)}catch(e){var a=JSON.stringify({value:i,measurement:n});return this._triggerApiUsageError(t,this.currentSession,a),void d.log(d.LogLevel.ERROR,a)}n=A.getMeasurementId(n);var e=u.MeasurementSpecification[n].type,r=u.MeasurementSpecification[n].state,s=u.MeasurementSpecification[n].respectHoldoff,_=u.MeasurementSpecification[n].validOnlyInPlaying;if(r&this.currentSession.state){if(A.isValidNumber(i))if(this.currentSession.state&u.State.EXTENDED_DYNAMIC_STREAMING_STATE&&(n!=d.Measurement.DS_NR_OF_CONTENT_PROFILE_BITRATE_UP_CHANGES&&n!=d.Measurement.DS_NR_OF_CONTENT_PROFILE_BITRATE_DOWN_CHANGES||(this.currentSession.disableAutoBitrateChange=!0),n!=d.Measurement.DS_SEGMENT_PROFILE_BITRATE||this.currentSession.disableAutoBitrateChange||this.currentSession.updateMeasureDsNrOfContentBitrateChanges(t,i)),u.MeasurementSpecification[n].allowedRange!=u.AllowedRange.INTEGER_VALUED||d.Utils.isValidIntegerNumber(i)||(i=Math.floor(i)),e==u.MeasurementType.CC_UINT16||e==u.MeasurementType.CC_UINT32){var o=null;if(n in this.currentSession.measurementList&&(o=this.currentSession.measurementList[n]),null!==o&&i===o.value.currentValue)return void d.log(d.LogLevel.DEBUG,"Count for measurement '"+n+"' did not increase. Current value '"+i+"'.");if(this.inHoldoff()&&s||!this.inPlaying()&&_)this.currentSession.error.nrOfSupressedDistortions+=1,d.log(d.LogLevel.DEBUG,"Supressing measurement '"+n+"'.");else{var E=A.updateCC(t,o,i);this.currentSession.measurementList[n]={value:E}}}else if(e==u.MeasurementType.GAUGE_MIN||e==u.MeasurementType.GAUGE_MAX)this.currentSession.measurementList[n]={value:i};else if(e==u.MeasurementType.DER||e==u.MeasurementType.SI){var T;T=n in this.currentSession.measurementList?this.currentSession.measurementList[n].value:{avg:0,min:0,max:0,sumOfSquares:0,nrOfUpdates:0,currentValue:0},T=A.aggregateSiDer(T,i),this.currentSession.measurementList[n]={value:T}}else e!=u.MeasurementType.LAST_UINT32&&e!=u.MeasurementType.LAST_UINT32||(this.currentSession.measurementList[n]={value:i});this._setStateMetadataFromMeasurement(n,i)}else d.log(d.LogLevel.INTERNAL,"Measurement '"+n+"' is not valid in the current state ("+this.currentSession.state+").")},e.prototype._setStateMetadataFromMeasurement=function(e,t){this.currentSession.state&u.State.EXTENDED_DYNAMIC_STREAMING_STATE&&(e===d.Measurement.DS_MANIFEST_SOURCE_IP?A.isValidIp(t)&&this.currentSession.addInitialAndFinalStateMetadata(d.InternalStateMetadata.DS_INITIAL_MANIFEST_SOURCE_IP,d.InternalStateMetadata.DS_FINAL_MANIFEST_SOURCE_IP,t):e===d.Measurement.DS_SEGMENT_SOURCE_IP?A.isValidIp(t)&&this.currentSession.addInitialAndFinalStateMetadata(d.InternalStateMetadata.DS_INITIAL_SEGMENT_SOURCE_IP,d.InternalStateMetadata.DS_FINAL_SEGMENT_SOURCE_IP,t):e===d.Measurement.DS_SEGMENT_PROFILE_BITRATE?this.currentSession.addInitialAndFinalStateMetadata(d.InternalStateMetadata.DS_INITIAL_PROFILE_BITRATE,d.InternalStateMetadata.DS_FINAL_PROFILE_BITRATE,t):e===d.Measurement.DS_SEGMENT_PROFILE_NR&&this.currentSession.addInitialAndFinalStateMetadata(d.InternalStateMetadata.DS_INITIAL_PROFILE_NR,d.InternalStateMetadata.DS_FINAL_PROFILE_NR,t))},e.prototype.setStateMetadata=function(t,n,i){try{A.validateStateMetadata(n,i)}catch(e){var a=JSON.stringify({value:i,sessionMetadata:n});return this._triggerApiUsageError(t,this.currentSession,a),void d.log(d.LogLevel.ERROR,a)}if("string"==typeof i&&(i=A.truncateStateMetadataInputString(i)),n=A.getStateMetadataId(n),u.StateMetadataSpecification[n].state&this.currentSession.state){this.currentSession.state&u.State.EXTENDED_DYNAMIC_STREAMING_STATE&&"DS_ORIGINATING_SERVER_MANIFEST"==n&&(this.currentSession.uri=i);var e=n in u.StateMetadataEventSpecification;if(e){var r=i;n!=d.StateMetadata.DS_ORIGINATING_SERVER_MANIFEST&&n!=d.StateMetadata.DS_ORIGINATING_SERVER_SEGMENT||(r=JSON.stringify({uri:i,type:n==d.StateMetadata.DS_ORIGINATING_SERVER_MANIFEST?"manifest":"segment"})),this.currentSession.addEvent(t,u.StateMetadataEventSpecification[n].type,u.StateMetadataEventSpecification[n].code,r)}e&&n===d.SessionMetadata.CDN||(n in this.currentSession.stateMetadata?this.currentSession.stateMetadata[n].isSent||(this.currentSession.stateMetadata[n].value=i):this.currentSession.stateMetadata[n]={value:i,isSent:!1})}else d.log(d.LogLevel.INTERNAL,"State metadata '"+n+"' is not valid in the current state ("+this.currentSession.state+").")},e.prototype.setAvailable=function(e,t){if(null==e)throw new Error("The current time is null or undefined.");if(null==t)throw new Error("The available is null or undefined.");u.State.QOE_STATES&this.currentSession.state?(this.available&&!t?this.unavailableStart=e:!this.available&&t&&(this.currentSession.error.unavailable+=e-this.unavailableStart),this.available=t):d.log(d.LogLevel.INTERNAL,"Setting available is not valid in the current state ("+this.currentSession.state+").")},e.prototype.dynamicStreamingSession=function(e,t,n){if(null==e)throw new Error("The current time is null or undefined.");if(null==n)throw new Error("The initial view state is null or undefined.");try{A.validateDsIdentification(t)}catch(e){throw new Error("Error: "+e.message)}var i=A.truncateUriAddressInputString(t.uri),a=t.protocol,r=A.truncateAssetInputString(t.asset),s=t.playlistType;if(!(this.currentSession.state&u.State.EXTENDED_DYNAMIC_STREAMING_STATE&&this.currentSession.uri===i&&this.currentSession.protocol===a&&this.currentSession.asset===r&&this.currentSession.playlistType===s)){var _=new E.DsSession(e,this.currentSession.id,i,a,r,s,n);this._closeCurrentSession(e,!0),this.sessions.push(_),this.currentSession=_,this.setAvailable(e,!0),this.setStateMetadata(e,d.StateMetadata.DS_ORIGINATING_SOURCE,i);var o={id:_.id,type:_.getType(),uri:_.uri,protocol:d.Utils.DsProtocolToString(a),asset:_.asset,playlistType:d.Utils.DsPlaylistTypeToString(s),initialViewState:d.Utils.ViewStateToString(n)};this.currentSession.addEvent(e,u.InternalEventSpecification.SESSION_OPEN.type,u.InternalEventSpecification.SESSION_OPEN.code,JSON.stringify(o)),this._addViewStateEvents(e,null,n,"",""),d.ProbeMetadata.DATA_CONNECTION_TYPE in this.probeMetadata&&this.setStateMetadata(e,d.SessionMetadata.DATA_CONNECTION_TYPE,this.probeMetadata.DATA_CONNECTION_TYPE.value)}},e.prototype.vodSession=function(e,t,n){if(null==e)throw new Error("The current time is null or undefined.");if(null==n)throw new Error("The initial view state is null or undefined.");try{A.validateVodIdentification(t)}catch(e){throw new Error("Error: "+e.message)}if(t.uri=A.truncateUriAddressInputString(t.uri),this.currentSession.state&u.State.VOD_STATE&&this.currentSession.uri===t.uri&&this.currentSession.protocol===t.protocol){if(!("sourceServer"in t))return;if(this.currentSession.sourceServer===t.sourceServer)return}var i=new E.VodSession(e,this.currentSession.id,t,n);this._closeCurrentSession(e,!0),this.sessions.push(i),this.currentSession=i,this.setAvailable(e,!0)},e.prototype.pvrSession=function(e,t,n){if(null==e)throw new Error("The current time is null or undefined.");if(null==n)throw new Error("The initial view state is null or undefined.");try{A.validatePvrIdentification(t)}catch(e){throw new Error("Error: "+e.message)}if(t.uri=A.truncateUriAddressInputString(t.uri),!(this.currentSession.state&u.State.PVR_STATE&&this.currentSession.uri===t.uri)){var i=new E.PvrSession(e,this.currentSession.id,t,n);this._closeCurrentSession(e,!0),this.sessions.push(i),this.currentSession=i,this.setAvailable(e,!0)}},e.prototype.dtvSession=function(e,t,n,i,a){if(null==e)throw new Error("The current time is null or undefined.");try{A.validateDtvIdentification(t)}catch(e){throw new Error("Error: "+e.message)}if(n){if(null==i)throw new Error("The initial view state is null or undefined.");if(!A.isValidNumber(a))throw new Error("initialTimeshiftDelay should be a number.");if(a<0)throw new Error("initialTimeshiftDelay should be >= 0")}var r=null;if(t.system===d.DtvDeliverySystem.IP){if(this.currentSession.state&u.State.MCAST_STATES&&this.currentSession.ip===t.channel.ip&&this.currentSession.port===t.channel.port&&this.currentSession.isTimeshift===n)return;var s=t.channel.ip,_=d.Utils.isValidIp(s);if(_||(d.log(d.LogLevel.ERROR,"Error: Invalid ip address string: "+t.channel.ip+". Using 0.0.0.10:10 instead."),t.channel.ip="0.0.0.10",t.channel.port=10),r=new E.DtvMcastSession(e,this.currentSession.id,t,n,i),!_){var o="Dtv session illegal IP: "+s;d.log(d.LogLevel.ERROR,o),this._triggerApiUsageError(e,r,JSON.stringify({error:o}))}}else{if(this.currentSession.state&u.State.RF_STATES&&this.currentSession.onid===t.channel.onid&&this.currentSession.tsid===t.channel.tsid&&this.currentSession.sid===t.channel.sid&&this.currentSession.isTimeshift===n)return;r=new E.DtvRfSession(e,this.currentSession.id,t,n,i)}this._closeCurrentSession(e,!0),this.sessions.push(r),this.currentSession=r,this.setAvailable(e,!0),n&&this.setMeasurement(e,d.Measurement.TIMESHIFT_DELAY,a)},e.prototype.viewStateChanged=function(e,t){this.viewStateExtended(e,t,"","")},e.prototype.viewStateExtended=function(e,t,n,i){if(null==e)throw new Error("The current time is null or undefined.");if(null==t)throw new Error("The view state is null or undefined.");try{A.validateInputString(n)}catch(e){throw new Error("Error: "+e.message)}try{A.validateInputString(i)}catch(e){throw new Error("Error: "+e.message)}if(u.State.STATES_IMPLEMENTING_VIEW_STATES&this.currentSession.state){var a=A.truncateErrorInfoInputString(n),r=A.truncateErrorInfoInputString(i);if(this.currentSession.state&u.State.EXTENDED_DYNAMIC_STREAMING_STATE&&(t===d.ViewState.STALLED?this.setAvailable(e,!1):this.setAvailable(e,!0),this.currentSession.updateHadInitialPlay(t)),0<this.currentSession.viewStates.length){if(this.currentSession.viewStates[this.currentSession.viewStates.length-1].viewState==t&&this.currentSession.viewStates[this.currentSession.viewStates.length-1].statusCode===a&&this.currentSession.viewStates[this.currentSession.viewStates.length-1].statusMessage===r)return;this.currentSession.viewStates[this.currentSession.viewStates.length-1].endTime=e,this._addViewStateEvents(e,this.currentSession.viewStates[this.currentSession.viewStates.length-1].viewState,t,a,r)}this.currentSession.viewStates.push({viewState:t,statusCode:a,statusMessage:r,startTime:e})}else d.log(d.LogLevel.INTERNAL,"Setting a view state is not valid in the current state ("+this.currentSession.state+").")},e.prototype.customEvent=function(e,t,n,i){try{A.validateInputString(n)}catch(e){throw new Error("Error parsing code: "+e.message)}try{A.validateInputString(i)}catch(e){throw new Error("Error parsing message: "+e.message)}var a=null;if(A.isValidEventCode(n)){var r=d.Utils.truncateEventMessageInputString(i);t==d.InternalDefinitions.EventType.EXT_TEXT?this.currentSession.addEvent(e,t,n,r):r.length==i.length?this.currentSession.addEvent(e,t,n,i):(a="Event "+n+" has an invalid (too long) value: "+i,d.log(d.LogLevel.ERROR,a),this._triggerApiUsageError(e,this.currentSession,JSON.stringify({error:a})))}else a="Invalid (too long) event code: "+n,d.log(d.LogLevel.ERROR,a),this._triggerApiUsageError(e,this.currentSession,JSON.stringify({error:a}))},e.prototype.failedStateSession=function(e,t){if(null==e)throw new Error("The current time is null or undefined.");try{A.validateErrIdentification(t)}catch(e){throw new Error("Error: "+e.message)}var n=A.truncateErrorInfoInputString(t.description);if(!(this.currentSession.state&u.State.FAILED_STATE&&this.currentSession.errorStr===n)){var i=new E.FailedSession(e,this.currentSession.id,n);this._closeCurrentSession(e,!0),this.sessions.push(i),this.currentSession=i}},e.prototype.idleSession=function(e){if(null==e)throw new Error("The current time is null or undefined.");if(!(this.currentSession.state&u.State.IDLE_STATE)){var t=new E.IdleSession(e,this.currentSession.id);this._closeCurrentSession(e,!0),this.sessions.push(t),this.currentSession=t}},e.prototype.undefinedActiveSession=function(e){if(null==e)throw new Error("The current time is null or undefined.");if(!(this.currentSession.state&u.State.UNDEFINED_ACTIVE_STATE)){var t=new E.UndefinedActiveSession(e,this.currentSession.id);this._closeCurrentSession(e,!0),this.sessions.push(t),this.currentSession=t}},e.prototype._closeCurrentSession=function(e,t){if(null==e)throw new Error("The current time is null or undefined.");if(null==t)throw new Error("Flag sessionEnded is null or undefined.");if(this.available||(this.currentSession.error.unavailable+=e-this.unavailableStart,this.unavailableStart=e),this.currentSession.endTime=e,this.currentSession.state&u.State.EXTENDED_DYNAMIC_STREAMING_STATE&&t){this.currentSession.hadInitialPlay||this.setStateMetadata(e,d.StateMetadata.DS_EXIT_BEFORE_INITIAL_PLAY,1),this.currentSession.viewStates[this.currentSession.viewStates.length-1].viewState==d.ViewState.STALLED&&this.setStateMetadata(e,d.StateMetadata.DS_EXIT_WHILE_STALLED,1),this.currentSession.updateCompletionRatio(),this.currentSession.sessionEnded=t;var n=+!this.currentSession.hadInitialPlay,i=0,a=0,r=0,s=0,_="";if(0<this.currentSession.viewStates.length){var o=this.currentSession.viewStates[this.currentSession.viewStates.length-1].viewState;_=d.Utils.ViewStateToString(o),o==d.ViewState.INITIAL_BUFFERING?i=1:o==d.ViewState.FAILED||o==d.ViewState.NO_ACCESS?1==n?a=1:r=1:o==d.ViewState.STALLED&&(s=1)}var E=Math.round(this.currentSession.endTime/this.currentSession.sessionStartTime/1e3);this.currentSession.addEvent(e,u.InternalEventSpecification.SESSION_CLOSE.type,u.InternalEventSpecification.SESSION_CLOSE.code,JSON.stringify({id:this.currentSession.id,finalVs:_,ebip:n,ebvs:i,ews:s,vsf:a,vpf:r,length:E,contentCompletion:this.currentSession.assetCompletionRatio}))}},e.prototype.updateErrorMs=function(e){if(!(null!==this.lastErrorMsCheck&&e-u.ERROR_MS_RESOLUTION<this.lastErrorMsCheck)){var t,n=null,i=Array(u.NR_OF_ERROR_METRICS).fill(!1),a=0;if(!this.available)for(a=0;a<u.NR_OF_ERROR_METRICS;a++)n="err_ms_mask"+(a+1).toString(),this.config[n][0]&128&&(i[a]=!0);for(var r in d.Measurement)if(r in this.currentSession.measurementList&&!(this.currentSession.measurementList[r].value.lastUpdateTime<=this.lastErrorMsCheck&&null!=this.lastErrorMsCheck)){var s=u.MeasurementSpecification[r].erroredMsMask;if(-1!==s)for(s-=1,t=8-Math.floor(s/8)-1,a=0;a<u.NR_OF_ERROR_METRICS;a++)n="err_ms_mask"+(a+1).toString(),this.config[n][t]&1<<s%8&&(i[a]=!0)}for(a=0;a<u.NR_OF_ERROR_METRICS;a++)!0===i[a]?(this.currentSession.error.intervals[a]++,this.currentSession.error.isActive[a]||(this.currentSession.error.periods[a]++,this.currentSession.error.isActive[a]=!0)):this.currentSession.error.isActive[a]=!1;this.lastErrorMsCheck=e}},e.prototype.inHoldoff=function(e){return!!(u.State.STATES_IMPLEMENTING_VIEW_STATES&this.currentSession.state&&0<this.currentSession.viewStates.length&&0<this.config.substate_holdoff&&e-this.currentSession.viewStates[this.currentSession.viewStates.length-1].startTime<1e3*this.config.substate_holdoff)||0<this.config.holdoff&&e-this.currentSession.startTime<1e3*this.config.holdoff},e.prototype.inPlaying=function(){return!!(u.State.STATES_IMPLEMENTING_VIEW_STATES&this.currentSession.state&&0<this.currentSession.viewStates.length&&this.currentSession.viewStates[this.currentSession.viewStates.length-1].viewState===d.ViewState.PLAYING)},e.prototype._addViewStateEvents=function(e,t,n,i,a){if(this.currentSession.state&u.State.EXTENDED_DYNAMIC_STREAMING_STATE)if(t!=n){var r=0;d.Measurement.PLAYBACK_POSITION in this.currentSession.measurementList&&(r=this.currentSession.measurementList[d.Measurement.PLAYBACK_POSITION].value);var s={from:null==t?"":d.Utils.ViewStateToString(t),to:d.Utils.ViewStateToString(n),statusCode:i,statusMessage:a,lastPosition:r};this.currentSession.addEvent(e,d.InternalDefinitions.InternalEventSpecification.VIEWSTATE_NEW.type,d.InternalDefinitions.InternalEventSpecification.VIEWSTATE_NEW.code,JSON.stringify(s))}else if(t==n&&(""!==i||""!==a)){var _={statusCode:i,statusMessage:a};this.currentSession.addEvent(e,d.InternalDefinitions.InternalEventSpecification.VIEWSTATE_STATUS_UPDATE.type,d.InternalDefinitions.InternalEventSpecification.VIEWSTATE_STATUS_UPDATE.code,JSON.stringify(_))}},e.prototype._triggerApiUsageError=function(e,t,n){var i=d.getLogLevel();i!=d.LogLevel.DEBUG&&i!=d.LogLevel.INTERNAL||t.addEvent(e,u.InternalEventSpecification.API_USAGE_ERROR.type,u.InternalEventSpecification.API_USAGE_ERROR.code,n)},d.EMPClientCore=e}(window.Agama),function(i){"use strict";var n=i.Reporting;function e(e){this._clientCore=new i.EMPClientCore(this._getCurrentTime(),e),this._updateIntervalMs=250,this._updateIntervalId=null,i.log(i.LogLevel.INFO,"Agama starting the EMP client..."),this._start()}e.prototype._getCurrentTime=function(){return(new Date).getTime()},e.prototype._sendReport=function(e){if(this._clientCore.hasMacAddress()){var t=this._clientCore.createReport(e);n.sendReport(t.data,t.emp_service)}else i.log(i.LogLevel.WARNING,"Probe metadata STB_MAC is not set. Not creating report.")},e.prototype._update=function(){var e=this._getCurrentTime();if(this._clientCore.updateErrorMs(e),this._clientCore.shouldSendReport(e)){this._sendReport(e);var t=this._clientCore.getNextReportTime()-e;i.log(i.LogLevel.INFO,"Next report will be sent in: %d ms",t)}},e.prototype._start=function(){if(null===this._updateIntervalId){var t=this;t._updateIntervalId=setInterval(function(){try{t._update()}catch(e){throw clearInterval(t._updateIntervalId),i.log(i.LogLevel.FATAL,"Fatal error in Agama EMP client. Error: "+e),e}},t._updateIntervalMs)}else i.log(i.LogLevel.WARNING,"The EMPClient is already running.")},e.prototype.getVersionInformation=function(){return i.log(i.LogLevel.DEBUG,"Agama getVersionInformation"),this._clientCore.getVersionInformation()},e.prototype.setExternalConfig=function(e){i.log(i.LogLevel.DEBUG,"Agama setExternalConfig > "+e),this._clientCore.setExternalConfig(this._getCurrentTime(),e)},e.prototype.setDeviceMetadata=function(e,t){i.log(i.LogLevel.DEBUG,"Agama setDeviceMetadata > "+e+", "+t),this._clientCore.setProbeMetadata(this._getCurrentTime(),e,t)},e.prototype.setProbeMetadata=function(e,t){i.log(i.LogLevel.DEBUG,"Agama setProbeMetadata > "+e+", "+t),this._clientCore.setProbeMetadata(this._getCurrentTime(),e,t)},e.prototype.shutdown=function(e){i.log(i.LogLevel.DEBUG,"Agama shutdown > "+e),clearInterval(this._updateIntervalId),this._updateIntervalId=null,this._clientCore.shutdown(e);var t=this._getCurrentTime();this._sendReport(t)},e.prototype.setMeasurement=function(e,t){i.log(i.LogLevel.DEBUG,"Agama setMeasurement > "+e+", "+t),this._clientCore.setMeasurement(this._getCurrentTime(),e,t)},e.prototype.setSessionMetadata=function(e,t){i.log(i.LogLevel.DEBUG,"Agama setSessionMetadata > "+e+", "+t),this._clientCore.setStateMetadata(this._getCurrentTime(),e,t)},e.prototype.setStateMetadata=function(e,t){i.log(i.LogLevel.DEBUG,"Agama setStateMetadata > "+e+", "+t),this._clientCore.setStateMetadata(this._getCurrentTime(),e,t)},e.prototype.setAvailable=function(e){i.log(i.LogLevel.DEBUG,"Agama setAvailable > "+e),this._clientCore.setAvailable(this._getCurrentTime(),e)},e.prototype.abrSession=function(e,t){i.log(i.LogLevel.DEBUG,"Agama abrSession > "+JSON.stringify(e)+", "+t),this._clientCore.dynamicStreamingSession(this._getCurrentTime(),e,t)},e.prototype.dynamicStreamingSession=function(e,t){i.log(i.LogLevel.DEBUG,"Agama dynamicStreamingSession > "+JSON.stringify(e)+", "+t),this._clientCore.dynamicStreamingSession(this._getCurrentTime(),e,t)},e.prototype.dtvSession=function(e){i.log(i.LogLevel.DEBUG,"Agama dtvSession > "+JSON.stringify(e)),this._clientCore.dtvSession(this._getCurrentTime(),e,!1,null,-1)},e.prototype.dtvTimeshiftSession=function(e,t,n){i.log(i.LogLevel.DEBUG,"Agama dtvTimeshiftSession > "+JSON.stringify(e)+", "+t+", "+n),this._clientCore.dtvSession(this._getCurrentTime(),e,!0,t,n)},e.prototype.vodSession=function(e,t){i.log(i.LogLevel.DEBUG,"Agama vodSession > "+JSON.stringify(e)+", "+t),this._clientCore.vodSession(this._getCurrentTime(),e,t)},e.prototype.pvrSession=function(e,t){i.log(i.LogLevel.DEBUG,"Agama pvrSession > "+JSON.stringify(e)+", "+t),this._clientCore.pvrSession(this._getCurrentTime(),e,t)},e.prototype.viewStateChanged=function(e){i.log(i.LogLevel.DEBUG,"Agama viewStateChanged > "+e),this._clientCore.viewStateChanged(this._getCurrentTime(),e)},e.prototype.viewStateExtended=function(e,t,n){i.log(i.LogLevel.DEBUG,"Agama viewStateExtended > "+e+", "+t+", "+n),this._clientCore.viewStateExtended(this._getCurrentTime(),e,t,n)},e.prototype.event=function(e,t){i.log(i.LogLevel.DEBUG,"Agama Event > "+e+", "+t),this._clientCore.customEvent(this._getCurrentTime(),i.InternalDefinitions.EventType.EXT_TEXT,e,t)},e.prototype.eventJson=function(e,t){i.log(i.LogLevel.DEBUG,"Agama Event Json> "+e+", "+t),this._clientCore.customEvent(this._getCurrentTime(),i.InternalDefinitions.EventType.EXT_JSON,e,t)},e.prototype.failedStateSession=function(e){i.log(i.LogLevel.DEBUG,"Agama failedStateSession > "+JSON.stringify(e)),this._clientCore.failedStateSession(this._getCurrentTime(),e)},e.prototype.exitSession=function(){i.log(i.LogLevel.DEBUG,"Agama exitSession"),this._clientCore.idleSession(this._getCurrentTime())},e.prototype.idleSession=function(){i.log(i.LogLevel.DEBUG,"Agama idleSession"),this._clientCore.idleSession(this._getCurrentTime())},e.prototype.undefinedActiveSession=function(){i.log(i.LogLevel.DEBUG,"Agama undefinedActiveSession"),this._clientCore.undefinedActiveSession(this._getCurrentTime())},i.EMPClient=e}(window.Agama),function(o){"use strict";var i=o.InternalDefinitions;function E(e){return e.replace(/^\s+|\s+$/g,"")}o.Utils.isValidIp=function(e){if(null==e)throw new Error("The IP string is null or undefined.");return!!o.Utils.isValidIpV4(e)||!!o.Utils.isValidIpV6(e)},o.Utils.isValidIpV4=function(e){if(null==e)throw new Error("The ipv4 string is null or undefined.");var t=e.split(".");if(4!=t.length)return!1;for(var n=0;n<4;n++)if(t[n]=parseInt(t[n],10),t[n]<0||255<t[n])return!1;return!0};var t=new RegExp("(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]).){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]).){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))","i");o.Utils.isValidIpV6=function(e){if(null==e)throw new Error("The ip string is null or undefined.");return t.test(e)};var n=new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$","i");o.Utils.isValidUuid=function(e){if(null==e)throw new Error("The UUID string is null or undefined.");return 36==e.length&&n.test(e)},o.Utils.validateProbeMetadata=function(e,t){if(!(e in o.ProbeMetadata))throw new Error("Unknown probe metadata type '"+e+"'.");if(null==t)throw new Error("Probe metadata + '"+e+"' value is null or undefined.");var n=i.ProbeMetadataSpecification[e].type;if(n===i.MetadataType.TEXT&&"string"!=typeof t)throw new Error("Probe metadata '"+e+"' value should be a string.");if(n===i.MetadataType.BINARY&&!Array.isArray(t))throw new Error("Probe metadata '"+e+"' value should be an array.");if((n===i.MetadataType.UINT8||n===i.MetadataType.UINT16||n===i.MetadataType.UINT32||n===i.MetadataType.UINT64)&&!o.Utils.isValidIntegerNumber(t))throw new Error("Probe metadata '"+e+"' value should be a number.");return!0},o.Utils.validateStateMetadata=function(e,t){if(!(e in o.StateMetadata))throw new Error("Unknown state metadata type '"+e+"'.");if(null==t)throw new Error("State metadata + '"+e+"' value is null or undefined.");var n=i.StateMetadataSpecification[e].type;if(n===i.MetadataType.TEXT&&"string"!=typeof t)throw new Error("State metadata '"+e+"' value should be a string.");if(n===i.MetadataType.BINARY&&!Array.isArray(t))throw new Error("State metadata '"+e+"' value should be an array.");if((n===i.MetadataType.UINT8||n===i.MetadataType.UINT16||n===i.MetadataType.UINT32||n===i.MetadataType.UINT64)&&!o.Utils.isValidIntegerNumber(t))throw new Error("State metadata '"+e+"' value should be a number.");return!0},o.Utils.validateMeasurement=function(e,t){if(!(e in o.Measurement))throw new Error("Unknown measurement type '"+e+"'.");if(null==t)throw new Error("Measurement '"+e+"' value is null or undefined.");var n=i.MeasurementSpecification[e].allowedRange;if(n===i.AllowedRange.TEXT_VALUED&&"string"!=typeof t)throw new Error("Measurement '"+e+"' value should be a string.");if((n===i.AllowedRange.PERCENTAGE||n===i.AllowedRange.INTEGER_VALUED||n===i.AllowedRange.REAL_VALUED)&&!o.Utils.isValidNumber(t))throw new Error("Measurement '"+e+"' value should be a number.");if(n==i.AllowedRange.PERCENTAGE&&(t<0||1<t))throw new Error("Illegal percentage value "+t.toFixed(2)+" for measurement '"+e+"'. Ignoring value.");return!0},o.Utils.validateDsIdentification=function(e){if(null==e)throw new Error("The dsIdentification is null or undefined.");if(!("uri"in e))throw new Error("dsIdentification is missing the 'uri' property");if(!("protocol"in e))throw new Error("dsIdentification is missing the 'protocol' property");if(!("playlistType"in e))throw new Error("dsIdentification is missing the 'playlistType' property");if(!("asset"in e))throw new Error("dsIdentification is missing the 'asset' property");if("string"!=typeof e.uri)throw new Error("dsIdentification.uri is expected to be a string.");if("string"!=typeof e.asset)throw new Error("dsIdentification.asset is expected to be a string.");for(var t=Object.keys(o.DsProtocol),n=!1,i=0;i<t.length;i++)if(o.DsProtocol[t[i]]===e.protocol){n=!0;break}if(!n)throw new Error("dsIdentification.protocol should be one of the listed in Agama.DsProtocol.");for(t=Object.keys(o.DsPlaylistType),n=!1,i=0;i<t.length;i++)if(o.DsPlaylistType[t[i]]===e.playlistType){n=!0;break}if(!n)throw new Error("dsIdentification.playlistType should be one of the listed in Agama.DsPlaylistType.");return!0},o.Utils.validatePvrIdentification=function(e){if(null==e)throw new Error("The pvrIdentification is null or undefined.");if(!("uri"in e))throw new Error("pvrIdentification has invalid structure.");if("string"!=typeof e.uri)throw new Error("pvrIdentification.uri is expected to be a string.");return!0},o.Utils.validateVodIdentification=function(e){if(null==e)throw new Error("The vodIdentification is null or undefined.");if(!("uri"in e))throw new Error("vodIdentification is missing the 'uri' property.");if(!("protocol"in e))throw new Error("vodIdentification is missing the 'protocol' property.");if("string"!=typeof e.uri)throw new Error("vodIdentification.uri is expected to be a string.");if("sourceServer"in e&&"string"!=typeof e.sourceServer)throw new Error("vodIdentification.sourceServer is expected to be a string.");for(var t=Object.keys(o.VodProtocol),n=!1,i=0;i<t.length;i++)if(o.VodProtocol[t[i]]===e.protocol){n=!0;break}if(!n)throw new Error("vodIdentification.protocol should be one of the listed in Agama.VodProtocol.");return!0},o.Utils.validateDtvIdentification=function(e){if(null==e)throw new Error("The dtvIdentification is null or undefined.");if(!("system"in e))throw new Error("dtvIdentification is missing the 'system' property.");if(!("channel"in e))throw new Error("dtvIdentification is missing the 'channel' property.");if(e.system===o.DtvDeliverySystem.IP){if(!("ip"in e.channel&&"port"in e.channel))throw new Error("In dtvIdentification, channel property has invalid structure.");if("string"!=typeof e.channel.ip)throw new Error("channel.ip is expected to be a string.");if(!o.Utils.isValidNumber(e.channel.port))throw new Error("channel.port is expected to be a number.")}else{if(e.system!==o.DtvDeliverySystem.DVB_C&&e.system!==o.DtvDeliverySystem.DVB_S&&e.system!==o.DtvDeliverySystem.DVB_T)throw new Error("Unsupported dtvIdentification.system.");if(!("onid"in e.channel&&"tsid"in e.channel&&"sid"in e.channel))throw new Error("In dtvIdentification, channel property has invalid structure.");if(!o.Utils.isValidNumber(e.channel.onid))throw new Error("channel.onid is expected to be a number.");if(!o.Utils.isValidNumber(e.channel.tsid))throw new Error("channel.tsid is expected to be a number.");if(!o.Utils.isValidNumber(e.channel.sid))throw new Error("channel.sid is expected to be a number.")}return!0},o.Utils.validateErrIdentification=function(e){if(null==e)throw new Error("The errIdentification is null or undefined.");if(!("description"in e))throw new Error("errIdentification is missing the 'description' property.");if("string"!=typeof e.description)throw new Error("error is expected to be a string.");return!0},o.Utils.validateExternalConfig=function(e){if(null==e)throw new Error("Configuration string is null or undefined.");if("string"!=typeof e)throw new Error("Configuration string should be of type string.");return!0},o.Utils.convertDeviceIdToMac=function(e){if(null===e||null===e)throw new Error("Device ID is null or undefined.");return"02:"+e.substr(26,2)+":"+e.substr(28,2)+":"+e.substr(30,2)+":"+e.substr(32,2)+":"+e.substr(34,2)},o.Utils.EXTERNAL_CONFIG_KEYS={emp_service:null,report_interval:null,operator_id:null,id_report_interval:null,err_ms_mask1:null,err_ms_mask2:null,err_ms_mask3:null,substate_holdoff:null,holdoff:null,errored_seconds:null,protocol:null},o.Utils.parseExternalConfig=function(e){var _={};-1!==e.indexOf(";")&&e.split(";").forEach(function(e){if(-1!==e.indexOf("=")){var t=e.split("="),n=E(t[0]),i=E(t[1]);if(!(n in o.Utils.EXTERNAL_CONFIG_KEYS))throw new Error("Invalid configuration parameter: "+n);if(0===n.lastIndexOf("err_ms_mask",0)){i=i.substr(2);var a=new ArrayBuffer(8);_[n]=new Uint8Array(a);for(var r=0;r<_[n].length;r++){var s=i[2*r]+i[2*r+1];_[n][r]=parseInt(s,16)}}else _[n]=i}});return _},o.Utils.strToMAC=function(e){if(null===e||null===e)throw new Error("Cannot convert null or undefined to MAC address.");var t=new Uint8Array(new ArrayBuffer(6)),n=0;return e.split(":").forEach(function(e){t[n++]=parseInt(e,16)}),t},o.Utils.convertIpv4ToUint32=function(e){var t=0,n=e.split(".");return t=parseInt(n[0],10)<<24,t|=parseInt(n[1],10)<<16,t|=parseInt(n[2],10)<<8,t|=parseInt(n[3],10)},o.Utils.aggregateSiDer=function(e,t){var n=e;return 0===n.nrOfUpdates?(n.avg=t,n.sumOfSquares=0,n.min=t,n.max=t,n.nrOfUpdates=1):(n.nrOfUpdates++,n.avg+=(t-n.avg)/n.nrOfUpdates,n.sumOfSquares+=1/(n.nrOfUpdates*(n.nrOfUpdates-1))*Math.pow(n.nrOfUpdates*t-n.avg*n.nrOfUpdates,2),t>n.max&&(n.max=t),t<n.min&&(n.min=t)),n.currentValue=t,n},o.Utils.updateCC=function(e,t,n){var i,a=e/1e3;return null==t?i={currentValue:n,lastReportedValue:0,lastUpdateTime:e,lastErroredSeconds:a,erroredSeconds:1}:(i={currentValue:n,lastReportedValue:t.value.lastReportedValue,lastUpdateTime:e},a!==t.value.lastErroredSeconds&&(i.lastErroredSeconds=a,i.erroredSeconds=t.value.erroredSeconds+1)),i},o.Utils.isValidNumber=function(e){return"number"==typeof e&&!isNaN(e)},o.Utils.isValidIntegerNumber=function(e){return!!o.Utils.isValidNumber(e)&&e%1==0},o.Utils.truncateDefaultInputString=function(e){return e.length>i.MaxLengthOfInputString.DEFAULT?e.substring(0,i.MaxLengthOfInputString.DEFAULT):e},o.Utils.truncateUriAddressInputString=function(e){return e.length>i.MaxLengthOfInputString.URI_ADDRESS?e.substring(0,i.MaxLengthOfInputString.URI_ADDRESS):e},o.Utils.truncateAssetInputString=function(e){return e.length>i.MaxLengthOfInputString.ASSET?e.substring(0,i.MaxLengthOfInputString.ASSET):e},o.Utils.truncateErrorInfoInputString=function(e){return e.length>i.MaxLengthOfInputString.ERROR_INFO?e.substring(0,i.MaxLengthOfInputString.ERROR_INFO):e},o.Utils.truncateProbeMetadataInputString=function(e){return e.length>i.MaxLengthOfInputString.PROBE_METADATA?e.substring(0,i.MaxLengthOfInputString.PROBE_METADATA):e},o.Utils.truncateStateMetadataInputString=function(e){return e.length>i.MaxLengthOfInputString.STATE_METADATA?e.substring(0,i.MaxLengthOfInputString.STATE_METADATA):e},o.Utils.isValidEventCode=function(e){return!(e.length>i.MaxLengthOfInputString.EVENT_CODE)},o.Utils.truncateEventMessageInputString=function(e){return e.length>i.MaxLengthOfInputString.EVENT_MESSAGE?e.substring(0,i.MaxLengthOfInputString.EVENT_MESSAGE):e},o.Utils.validateInputString=function(e){if(null==e)throw new Error("Input is null or undefined.");if("string"!=typeof e)throw new Error("Input is not string when a string is is expected.");return!0},o.Utils.DsPlaylistTypeToString=function(e){switch(e){case o.DsPlaylistType.EVENT:return"event";case o.DsPlaylistType.VOD:return"vod";case o.DsPlaylistType.LIVE:return"live";default:return""}},o.Utils.DsProtocolToString=function(e){switch(e){case o.DsProtocol.APPLE_HLS:return"HLS";case o.DsProtocol.MS_SMOOTH:return"MSSS";case o.DsProtocol.ADOBE_HDS:return"HDS";case o.DsProtocol.MPEG_DASH:return"DASH";case o.DsProtocol.UNDEFINED:return"UNDEFINED";default:return""}},o.Utils.ViewStateToString=function(e){switch(e){case o.ViewState.PAUSED:return"paused";case o.ViewState.PLAYING:return"playing";case o.ViewState.FASTFORWARDING:return"fastforwarding";case o.ViewState.REWINDING:return"rewinding";case o.ViewState.FAILED:return"failed";case o.ViewState.INITIAL_BUFFERING:return"initial-buffering";case o.ViewState.STALLED:return"stalled";case o.ViewState.NO_ACCESS:return"no-access";case o.ViewState.SEEK:return"seek";default:return""}},o.Utils.getMeasurementId=function(e){switch(e){case o.Measurement.SEGMENT_READ_BITRATE:return o.Measurement.DS_SEGMENT_READ_BITRATE;case o.Measurement.SEGMENT_PROFILE_NUMBER:return o.Measurement.DS_SEGMENT_PROFILE_NR;case o.Measurement.SEGMENT_PROFILE_BITRATE:return o.Measurement.DS_SEGMENT_PROFILE_BITRATE;case o.Measurement.NUMBER_OF_FRAMES_DECODED:return o.Measurement.NR_OF_FRAMES_DECODED;case o.Measurement.NUMBER_OF_FRAMES_DROPPED:return o.Measurement.NR_OF_FRAMES_DROPPED;default:return e}},o.Utils.getStateMetadataId=function(e){switch(e){case o.SessionMetadata.ASSET_DURATION:return o.SessionMetadata.SPECIFIED_DURATION;case o.SessionMetadata.NUMBER_OF_CONTENT_PROFILES:return o.SessionMetadata.DS_NR_OF_CONTENT_PROFILES;case o.SessionMetadata.MANIFEST_URI:return o.SessionMetadata.DS_ORIGINATING_SERVER_MANIFEST;case o.SessionMetadata.SERVICE_NAME:return o.SessionMetadata.CONTENT_SERVICE_TITLE;default:return e}},o.Utils.getProbeMetadataId=function(e){switch(e){case o.DeviceMetadata.DEVICE_MANUFACTURER:return o.DeviceMetadata.STB_MANUFACTURER;case o.DeviceMetadata.DEVICE_MODEL:return o.DeviceMetadata.STB_MODEL;case o.DeviceMetadata.DEVICE_IP:return o.DeviceMetadata.STB_IP;case o.DeviceMetadata.DEVICE_OS_VERSION:return o.DeviceMetadata.PLATFORM_VERSION;case o.DeviceMetadata.PLAYER:return o.DeviceMetadata.MIDDLEWARE;case o.DeviceMetadata.PLAYER_VERSION:return o.DeviceMetadata.MIDDLEWARE_VERSION;case o.DeviceMetadata.DEVICE_BROWSER_VERSION:return o.DeviceMetadata.FIRMWARE_VERSION;default:return e}}}(window.Agama);